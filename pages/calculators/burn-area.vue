<template>
  <div class="flex-1">
    <div class="max-w-5xl w-full mx-auto px-2 md:px-4 pt-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2">
        <h1 class="text-2xl font-bold text-slate-900 dark:text-white">Площадь ожоговой поверхности (Лунд–Браудер)</h1>
        <div class="flex md:items-center gap-2">
          <UButton :color="isBookmarked ? 'primary' : 'neutral'" :variant="isBookmarked ? 'solid' : 'soft'"
            :icon="isBookmarked ? 'i-heroicons-bookmark-solid' : 'i-heroicons-bookmark'"
            @click="toggleBookmark('burn-area')" class="cursor-pointer h-9 w-9 flex items-center justify-center"
            :title="isBookmarked ? 'В избранном' : 'В закладки'" />
          <UButton color="neutral" variant="soft" @click="resetAll"
            class="cursor-pointer h-9 px-3 flex items-center justify-center" title="Сбросить">
            Сбросить
          </UButton>
        </div>
      </div>

      <p class="text-slate-600 dark:text-slate-300">
        Выберите возраст и отмечайте поражённые сегменты на передней или задней поверхности тела. Проценты автоматически
        суммируются по таблице Лунда–Браудера.
      </p>
    </div>

    <div class="max-w-5xl mx-auto px-2 md:px-4 py-6 space-y-6">
      <div class="bg-white dark:bg-slate-800 overflow-hidden rounded-lg border border-slate-100 dark:border-slate-600">
        <div class="p-4">
          <!-- Панель итогов -->
          <div class="bg-slate-50 dark:bg-slate-700/20 rounded-lg p-4 grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <div class="text-sm text-slate-600 dark:text-slate-300">Возраст</div>
              <input v-model.number="ageYears" type="number" placeholder="укажите возраст" 
                class="text-2xl font-semibold text-slate-900 dark:text-white bg-transparent border-0 p-0 outline-none w-auto"
              />
            </div>
            <div>
              <div class="text-sm text-slate-600 dark:text-slate-300">Суммарная площадь ожога</div>
              <div class="text-3xl font-bold" :class="totalClass">{{ totalPercent.toFixed(1) }}%</div>
            </div>
          </div>

          <!-- Интерактивные фигуры рядом -->
          <div class="relative bg-slate-100 dark:bg-slate-700 rounded-lg overflow-hidden flex items-center justify-center p-2 h-[420px] md:h-[500px]">
            <!-- Метка "Спереди" в левом углу -->
            <div class="absolute top-2 left-2 bg-white dark:bg-slate-800 px-2 py-1 rounded text-xs font-medium text-slate-700 dark:text-slate-300 z-10">
              Спереди
            </div>
            
            <!-- Метка "Сзади" в правом углу -->
            <div class="absolute top-2 right-2 bg-white dark:bg-slate-800 px-2 py-1 rounded text-xs font-medium text-slate-700 dark:text-slate-300 z-10">
              Сзади
            </div>
            
            <div class="flex gap-4 h-full items-center">
              <!-- Вид спереди -->
              <div class="relative h-full">
                <div 
                  ref="frontSvgRef"
                  v-html="svgFront" 
                  @click="handleFrontSvgClick"
              class="interactive-svg"
            ></div>
              </div>
              
              <!-- Вид сзади -->
              <div class="relative h-full">
                <div 
                  ref="backSvgRef"
                  v-html="svgBack" 
                  @click="handleBackSvgClick"
                  class="interactive-svg"
                ></div>
              </div>
            </div>
          </div>

          <div class="mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
            <p class="text-sm text-slate-700 dark:text-slate-300">
              Кликните на сегмент тела, чтобы отметить поражённую область. Подсветка активного сегмента красным.
            </p>
          </div>
        </div>
      </div>

      <!-- Подсказка по процентам -->
      <div class="bg-white dark:bg-slate-800 overflow-hidden rounded-lg border border-slate-100 dark:border-slate-600">
        <div class="px-4 py-3 border-b border-slate-100 dark:border-slate-600">
          <div class="text-base sm:text-lg font-semibold text-slate-900 dark:text-white">Таблица процентов
            (Лунд–Браудер)
          </div>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-slate-100 dark:divide-slate-700">
            <thead class="bg-slate-50 dark:bg-slate-800">
              <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                  Части тела
                </th>
                <th scope="col" class="px-2 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-auto">
                  0 лет
                </th>
                <th scope="col" class="px-2 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-auto">
                  1 год
                </th>
                <th scope="col" class="px-2 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-auto">
                  5 лет
                </th>
                <th scope="col" class="px-2 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-auto">
                  10 лет
                </th>
                <th scope="col" class="px-2 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-auto">
                  15 лет
                </th>
              </tr>
            </thead>
            <tbody class="bg-white dark:bg-slate-800 divide-y divide-slate-100 dark:divide-slate-700">
              <tr v-for="row in tableRows" :key="row.part" 
                  :class="{ 'bg-red-100 dark:bg-red-900/30': isRowHighlighted(row.part) }">
                <td class="px-4 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white">
                  {{ row.part }}
                </td>
                <td class="px-2 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white text-center">
                  {{ row.a0 }}%
                </td>
                <td class="px-2 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white text-center">
                  {{ row.a1 }}%
                </td>
                <td class="px-2 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white text-center">
                  {{ row.a5 }}%
                </td>
                <td class="px-2 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white text-center">
                  {{ row.a10 }}%
                </td>
                <td class="px-2 py-4 whitespace-nowrap text-sm text-slate-900 dark:text-white text-center">
                  {{ row.a15 }}%
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, watch, nextTick } from 'vue'
import frontSvg from '~/assets/svg/front.svg?raw'
import backSvg from '~/assets/svg/back.svg?raw'

definePageMeta({ middleware: 'auth', headerTitle: 'Площадь ожога (Лунд–Браудер)' })

// Закладки
const { isBookmarked, toggleBookmark, updateIsBookmarked } = useCalculatorBookmarks()
onMounted(() => updateIsBookmarked('burn-area'))

// Возраст
const ageOptions = [
  { label: 'Новорождённый', value: 0 },
  { label: '1 год', value: 1 },
  { label: '5 лет', value: 5 },
  { label: '10 лет', value: 10 },
  { label: '15 лет/взрослый', value: 15 }
]
const ageYears = ref<number | null>(null)
const ageLabel = computed(() => {
  if (ageYears.value === null || ageYears.value === undefined) return ''
  return ageOptions.find(o => o.value === ageYears.value)?.label || ageYears.value + ' лет'
})

// Таблица Лунд–Браудера (проценты по частям тела)
// Источник: medsoftpro — калькулятор Лунд–Браудер [https://medsoftpro.ru/kalkulyatory/burnchild.html]
const lundBrowder: Record<string, Record<number, number>> = {
  head: { 0: 20, 1: 17, 5: 13, 10: 10, 15: 8 },
  neck: { 0: 2, 1: 2, 5: 2, 10: 2, 15: 2 },
  chest: { 0: 10, 1: 10, 5: 10, 10: 10, 15: 10 },
  abdomen: { 0: 8, 1: 8, 5: 8, 10: 8, 15: 8 },
  back: { 0: 11, 1: 11, 5: 11, 10: 11, 15: 11 },
  buttocks: { 0: 5, 1: 5, 5: 5, 10: 5, 15: 5 },
  genitals: { 0: 1, 1: 1, 5: 1, 10: 1, 15: 1 },
  shoulders: { 0: 8, 1: 8, 5: 8, 10: 8, 15: 8 },
  forearms: { 0: 5, 1: 5, 5: 5, 10: 5, 15: 5 },
  hands: { 0: 5, 1: 5, 5: 5, 10: 5, 15: 5 },
  thighs: { 0: 11, 1: 13, 5: 16, 10: 18, 15: 19 },
  legs: { 0: 9, 1: 10, 5: 11, 10: 12, 15: 13 },
  feet: { 0: 5, 1: 5, 5: 5, 10: 5, 15: 5 }
}

// Дробим двусторонние элементы на лев/прав и перед/зад где нужно (каждый сегмент — доля от общего процента части)
// Мапа сегментов → базовая часть и доля
const segmentMap: Record<string, { base: keyof typeof lundBrowder; fraction: number; label: string }> = {
  // Перед (front)
  'front-head': { base: 'head', fraction: 0.5, label: 'Голова (перед)' },
  'front-neck': { base: 'neck', fraction: 0.5, label: 'Шея (перед)' },
  'front-chest': { base: 'chest', fraction: 1.0, label: 'Грудь и живот (перед)' },
  'front-abdomen': { base: 'genitals', fraction: 1.0, label: 'Гениталии (перед)' },
  'front-shoulder-l': { base: 'shoulders', fraction: 0.5, label: 'Плечо лев. (перед)' },
  'front-shoulder-r': { base: 'shoulders', fraction: 0.5, label: 'Плечо прав. (перед)' },
  'front-forearm-l': { base: 'forearms', fraction: 0.5, label: 'Предплечье лев. (перед)' },
  'front-forearm-r': { base: 'forearms', fraction: 0.5, label: 'Предплечье прав. (перед)' },
  'front-hand-l': { base: 'hands', fraction: 0.5, label: 'Кисть лев.' },
  'front-hand-r': { base: 'hands', fraction: 0.5, label: 'Кисть прав.' },
  'front-thigh-l': { base: 'thighs', fraction: 0.5, label: 'Бедро лев. (перед)' },
  'front-thigh-r': { base: 'thighs', fraction: 0.5, label: 'Бедро прав. (перед)' },
  'front-leg-l': { base: 'legs', fraction: 0.5, label: 'Голень лев. (перед)' },
  'front-leg-r': { base: 'legs', fraction: 0.5, label: 'Голень прав. (перед)' },
  'front-feet-l': { base: 'feet', fraction: 0.5, label: 'Стопа лев. (перед)' },
  'front-feet-r': { base: 'feet', fraction: 0.5, label: 'Стопа прав. (перед)' },

  // Зад (back)
  'back-head': { base: 'head', fraction: 0.5, label: 'Голова (зад)' },
  'back-neck': { base: 'neck', fraction: 0.5, label: 'Шея (зад)' },
  'back-back': { base: 'back', fraction: 1.0, label: 'Спина' },
  'back-buttock-l': { base: 'buttocks', fraction: 0.5, label: 'Ягодица лев. (зад)' },
  'back-buttock-r': { base: 'buttocks', fraction: 0.5, label: 'Ягодица прав. (зад)' },
  'back-genitals': { base: 'genitals', fraction: 1.0, label: 'Гениталии' },
  'back-shoulder-l': { base: 'shoulders', fraction: 0.5, label: 'Плечо лев. (зад)' },
  'back-shoulder-r': { base: 'shoulders', fraction: 0.5, label: 'Плечо прав. (зад)' },
  'back-forearm-l': { base: 'forearms', fraction: 0.5, label: 'Предплечье лев. (зад)' },
  'back-forearm-r': { base: 'forearms', fraction: 0.5, label: 'Предплечье прав. (зад)' },
  'back-hand-l': { base: 'hands', fraction: 0.5, label: 'Кисть лев.' },
  'back-hand-r': { base: 'hands', fraction: 0.5, label: 'Кисть прав.' },
  'back-thigh-l': { base: 'thighs', fraction: 0.5, label: 'Бедро лев. (зад)' },
  'back-thigh-r': { base: 'thighs', fraction: 0.5, label: 'Бедро прав. (зад)' },
  'back-leg-l': { base: 'legs', fraction: 0.5, label: 'Голень лев. (зад)' },
  'back-leg-r': { base: 'legs', fraction: 0.5, label: 'Голень прав. (зад)' },
  'back-feet-l': { base: 'feet', fraction: 0.5, label: 'Стопа лев. (зад)' },
  'back-feet-r': { base: 'feet', fraction: 0.5, label: 'Стопа прав. (зад)' }
}

// Оба SVG теперь отображаются одновременно

// Активные сегменты
const activeIds = ref<Set<string>>(new Set())

// Сохранение в localStorage
function saveToLocalStorage() {
  const data = {
    ageYears: ageYears.value,
    activeIds: Array.from(activeIds.value)
  }
  localStorage.setItem('burnAreaCalculator', JSON.stringify(data))
}

// Загрузка из localStorage
function loadFromLocalStorage() {
  const saved = localStorage.getItem('burnAreaCalculator')
  if (saved) {
    try {
      const data = JSON.parse(saved)
      if (data.ageYears !== null && data.ageYears !== undefined) {
        ageYears.value = data.ageYears
      }
      if (data.activeIds && Array.isArray(data.activeIds)) {
        activeIds.value = new Set(data.activeIds)
      }
    } catch (e) {
      console.error('Error loading from localStorage:', e)
    }
  }
}

function toggleSegment(id: string) {
  const s = new Set(activeIds.value)
  if (s.has(id)) s.delete(id); else s.add(id)
  activeIds.value = s
  applyActiveStyles()
  saveToLocalStorage()
}
const isActive = (id: string) => activeIds.value.has(id)

// Получить активные части тела для подсветки таблицы
const activeBodyParts = computed(() => {
  const parts = new Set<string>()
  activeIds.value.forEach(segmentId => {
    const mapping = segmentMap[segmentId]
    if (mapping) {
      // Если это front-chest, подсвечиваем грудь и живот
      if (segmentId === 'front-chest') {
        parts.add('chest')
        parts.add('abdomen')
      } 
      // front-abdomen на самом деле гениталии
      else if (segmentId === 'front-abdomen') {
        parts.add('genitals')
      }
      else {
        parts.add(mapping.base)
      }
    }
  })
  return parts
})

// Маппинг частей тела к названиям в таблице (с учетом (2) для парных частей)
const partNameMapping: Record<string, string> = {
  head: 'Голова',
  neck: 'Шея',
  chest: 'Грудь',
  abdomen: 'Живот',
  back: 'Спина',
  buttocks: 'Ягодицы (2)',
  genitals: 'Гениталии',
  shoulders: 'Плечи (2)',
  forearms: 'Предплечья (2)',
  hands: 'Кисти',
  thighs: 'Бедра (2)',
  legs: 'Голени (2)',
  feet: 'Стопы (2)'
}

// Проверка, нужно ли подсветить строку таблицы
const isRowHighlighted = (partName: string) => {
  // Находим базовую часть тела по названию в таблице
  const basePart = Object.keys(partNameMapping).find(key => partNameMapping[key] === partName)
  if (!basePart) return false
  
  // Проверяем, активна ли эта часть
  return activeBodyParts.value.has(basePart)
}

// Refs для SVG
const frontSvgRef = ref<HTMLElement | null>(null)
const backSvgRef = ref<HTMLElement | null>(null)

// Регистр явных соответствий SVG-элементов сегментам (без правки исходных файлов)
// Голова (перед)
const svgElementBindings: Array<{ matcher: (el: SVGGraphicsElement) => boolean; segmentId: string }> = [
  {
    // Голова (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M61.8016 25.6507C61.0616 22.9507 60.5116 19.2107 61.3016 15.0107C61.5516 13.6807 61.9416 11.7207 63.1916 9.46066C64.8216 6.52066 67.0016 4.77066 68.2416 3.91066C70.7816 2.15066 73.1016 1.62067 75.1816 1.13067C79.5016 0.110665 83.0316 0.470665 84.4316 0.670665C86.9516 1.02067 90.3116 1.48066 93.6816 3.91066C98.0016 7.03066 99.5516 11.3707 100.162 13.1607C101.622 17.4707 101.262 21.2807 101.092 22.8707C100.972 24.0207 100.782 24.9807 100.632 25.6507C100.852 25.5707 101.452 25.3707 102.022 25.6507C102.252 25.7607 102.672 26.0507 102.952 27.0407C103.632 29.4407 102.492 31.6707 102.492 31.6707C101.562 33.4607 100.682 33.1807 99.7116 34.9107C99.6916 34.9507 99.5416 35.2207 99.4116 35.5407C98.6016 37.6507 98.3216 39.5307 98.3216 39.5307C98.0816 41.1807 97.6916 42.4807 96.9316 45.0807C96.3516 47.0607 95.9416 48.4507 95.0816 50.1707C94.1016 52.1207 93.4016 53.5307 91.8416 54.8007C89.5916 56.6307 86.9716 57.0307 86.2916 57.1107C85.2416 57.2407 84.7916 57.2007 83.0516 57.3607C81.0616 57.5407 80.6716 57.6507 79.3516 57.5807C76.0016 57.4007 74.3316 57.3107 72.8716 56.6507C69.7616 55.2607 68.0116 52.3507 66.3916 49.2507C65.6916 47.9007 64.5816 45.7607 64.0816 42.7707C63.8816 41.5407 63.3216 37.4807 62.6916 34.4407C62.6216 34.1007 62.5216 33.6207 62.2316 33.0507C61.4416 31.4907 60.3716 31.4107 59.4516 30.2707C58.1716 28.6707 57.9416 25.9207 58.9916 25.1807C59.8416 24.5807 61.3916 25.4207 61.8116 25.6407L61.8016 25.6507Z',
    segmentId: 'front-head'
  },
  {
    // Шея (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M91.8016 64.0507C90.4716 65.4907 89.2516 66.8007 87.1716 67.7507C84.8417 68.8207 82.8616 68.7707 79.3116 68.6807C76.7816 68.6107 75.0316 68.5507 72.8316 67.7207C71.7916 67.3307 69.9316 66.6107 68.2016 64.8507C67.3016 63.9407 66.8317 63.1307 65.8917 61.5107C64.9817 59.9407 64.9017 59.4207 64.9617 58.9607C65.0917 58.1007 65.6317 58.0807 66.3517 56.7307C66.7817 55.9207 67.0917 55.2607 67.2817 53.8607C67.3917 53.0307 67.5417 52.2507 67.7117 51.5507C69.0117 53.7607 70.5617 55.6607 72.8517 56.7207C74.3117 57.4007 75.9816 57.4907 79.3316 57.6807C80.6516 57.7507 81.0417 57.6507 83.0317 57.4607C84.7617 57.3007 85.2216 57.3407 86.2716 57.2107C86.9516 57.1207 89.5717 56.7107 91.8217 54.8207C92.0717 54.6107 92.3116 54.3907 92.5116 54.1707C92.6216 54.8007 92.8217 55.4907 93.1817 56.2607C94.1217 58.2507 94.4317 58.6007 94.5717 59.1307C94.9617 60.6507 93.4717 62.2507 91.7917 64.0607L91.8016 64.0507Z',
    segmentId: 'front-neck'
  },
  {
    // Грудь и живот (перед) — объединённая область
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M126.962 79.7707C126.902 80.4107 125.942 80.7307 125.112 81.1607C123.992 81.7307 123.282 82.4707 121.872 83.9407C120.682 85.1807 119.982 86.2607 119.092 87.6407C118.542 88.4907 117.872 89.5407 117.242 90.8807C116.312 92.8607 116.002 94.3707 115.392 97.3607C114.932 99.5907 114.572 101.381 114.462 103.841C114.462 103.931 114.462 103.861 114.462 108.471C114.462 112.651 114.462 112.371 114.462 112.631C114.482 115.401 114.532 115.541 114.462 116.331C114.312 118.071 113.942 118.921 113.532 120.491C113.282 121.461 113.262 121.741 112.602 126.971C111.772 133.571 111.792 133.211 111.672 134.371C111.582 135.311 111.342 137.921 111.212 141.311C111.152 142.761 111.082 145.311 111.212 151.021C111.362 157.481 111.372 160.711 111.672 163.051C112.232 167.451 112.522 169.651 112.602 169.991C112.882 171.201 112.672 172.511 113.062 173.691C113.082 173.761 113.182 174.031 113.062 174.151C112.942 174.271 112.652 174.171 112.602 174.151C111.622 173.841 108.142 176.341 107.972 176.461C106.792 177.311 105.502 178.001 104.272 178.771C101.372 180.591 101.322 180.571 100.572 181.081C98.9816 182.151 95.9416 184.781 95.9416 184.781C95.0416 185.561 92.4216 187.841 91.3116 188.941C90.7516 189.501 90.7616 189.581 90.3816 189.871C89.9216 190.221 89.5016 190.411 89.4516 190.801C89.4216 191.021 89.5316 191.141 89.4516 191.261C89.3216 191.451 88.8816 191.361 88.5216 191.261H77.4216C76.4916 191.261 75.5716 191.221 74.6416 191.261C72.4716 191.361 72.1116 191.611 71.4016 191.261C70.7416 190.931 70.4616 190.461 70.0116 189.871C68.7516 188.221 68.3216 188.451 65.3816 185.711C63.4616 183.921 63.9216 184.081 62.6016 182.931C60.9216 181.471 59.4216 180.561 57.9716 179.691C55.8616 178.421 55.8816 178.661 53.8116 177.381C51.1816 175.761 51.3516 175.491 50.1116 175.071C48.6016 174.561 47.1516 174.551 46.8716 173.681C46.8316 173.561 46.8516 173.531 46.8716 172.751C46.8916 171.751 46.8716 171.321 46.8716 170.901C46.8816 169.691 47.1816 168.741 47.3316 168.121C47.6316 166.941 47.6816 165.481 47.7916 162.571C47.9116 159.281 47.7216 159.121 47.7916 156.091C47.8716 152.841 48.1016 152.841 48.2516 149.151C48.3216 147.561 48.4316 144.931 48.2516 141.751C48.1916 140.681 48.1516 140.481 47.3216 133.891C46.2116 125.081 46.2216 124.931 45.9316 124.181C45.6216 123.371 45.0116 121.971 45.0016 120.021C45.0016 119.381 45.0616 118.981 45.4616 116.781C46.2816 112.331 46.3116 112.441 46.3916 111.691C46.5816 109.961 46.5116 108.681 46.3916 106.601C46.3416 105.641 46.2516 104.041 45.9316 101.971C45.5516 99.4907 45.0416 97.7007 44.5416 95.9607C44.1816 94.7007 43.5916 92.7407 42.6916 90.4107C41.9316 88.4307 41.5416 87.4307 40.8416 86.2507C40.2816 85.3007 40.0816 85.1607 39.4816 84.4307C38.8016 83.6007 38.6216 83.2407 38.0716 82.5507C37.6516 82.0207 36.7016 81.2707 34.8316 79.7707C33.7116 78.8707 33.5016 78.7307 33.4416 78.3807C33.3416 77.7707 33.7516 77.1107 35.7516 75.6007C42.8616 70.2807 40.7116 70.9707 44.5416 68.6607C46.8116 67.2907 47.5416 67.1007 49.5716 66.1507C50.1616 65.8807 50.5516 65.6907 52.8716 64.4907C55.9716 62.8907 59.1016 61.2507 61.2016 60.3307C62.2216 59.8807 63.0616 59.5707 63.5116 59.4007C64.0816 59.2007 64.5616 59.0407 64.9016 58.9407C64.8316 59.4007 64.9016 59.9207 65.8316 61.4907C66.7716 63.1107 67.2516 63.9207 68.1416 64.8307C69.8716 66.5807 71.7216 67.3007 72.7716 67.6907C74.9716 68.5207 76.7216 68.5807 79.2516 68.6507C82.8116 68.7407 84.7816 68.7907 87.1116 67.7207C89.1816 66.7707 90.4016 65.4607 91.7416 64.0207C93.4216 62.2107 94.9116 60.6107 94.5216 59.0907C94.5216 59.0907 94.5216 59.0807 94.5216 59.0707C95.1716 59.4307 95.5616 60.3307 96.3816 61.2407C96.8916 61.8107 97.5216 62.3307 100.082 63.5507C102.862 64.8807 105.182 65.7507 107.942 66.7907C118.092 70.6207 114.932 69.5707 116.272 70.0307C117.032 70.2907 118.142 70.6507 119.512 71.4207C121.552 72.5607 122.852 73.8307 123.212 74.2007C124.922 75.9307 125.842 77.6707 126.452 78.8307C126.562 79.0307 126.952 79.3407 126.912 79.7607L126.962 79.7707Z',
    segmentId: 'front-chest'
  },
  {
    // Правое плечо (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M46.9316 109.381C46.9316 108.801 46.8916 108.501 46.8216 108.001C46.7616 107.541 46.6616 106.901 46.5216 105.691C46.5016 105.541 46.4816 105.381 46.4616 105.211C46.3716 104.441 46.3216 103.851 46.2716 103.391C46.1516 102.081 46.1816 101.771 46.0816 101.071C46.0616 100.931 46.0316 100.771 46.0016 100.581C45.8616 99.8007 45.7416 99.3807 45.5716 98.8007C45.4116 98.3007 45.2116 97.6707 44.9116 96.5707C44.8216 96.2507 44.7216 95.8907 44.6116 95.4807C44.4916 95.0207 44.3916 94.6407 44.3116 94.3307C43.9516 92.8907 43.9916 92.7607 43.7716 92.0707C43.7416 91.9807 43.7116 91.8907 43.6816 91.7807C43.5416 91.3507 43.3216 90.6907 42.9716 89.8807C42.7016 89.2607 42.3616 88.5507 41.9216 87.8007C41.5316 87.1407 41.2116 86.6607 40.9116 86.2307C40.3316 85.4007 39.9316 84.9007 39.5216 84.3807C37.8616 82.2407 38.1816 82.2307 37.2116 81.1407C36.0816 79.8907 34.9816 79.1607 34.4316 78.8307C33.7916 78.4407 33.2116 78.1707 32.7816 77.9907C31.1116 79.9707 29.3816 82.4507 27.9916 85.5807C25.6916 90.7207 25.3316 95.1107 25.1716 99.1707C24.9916 103.611 24.8716 107.401 24.8016 111.091C24.4616 127.051 24.6816 134.431 24.7116 134.851L24.7516 135.271C25.0016 137.751 25.3316 141.151 24.2616 145.331C24.0416 146.211 23.7716 147.041 23.4916 147.801C28.6016 145.991 35.2016 145.791 39.5816 149.691C39.7016 148.801 39.8316 147.871 39.9716 146.901C40.2916 144.621 40.5216 142.821 40.7216 141.241C41.1616 137.731 41.4616 135.411 42.2816 131.661C42.9716 128.511 43.8116 125.371 44.7916 122.321C44.8916 121.701 44.9916 121.151 45.0916 120.651C45.1916 120.151 45.2816 119.711 45.3716 119.291C45.4216 119.051 45.4716 118.831 45.5316 118.611C45.5616 118.481 45.6816 117.971 45.8516 117.201C45.9816 116.591 46.1416 115.811 46.2916 114.921C46.3416 114.621 46.4016 114.311 46.4516 113.991C46.5316 113.491 46.6016 113.041 46.6516 112.631C46.7916 111.601 46.8616 110.841 46.8916 110.321C46.9216 109.831 46.9116 109.531 46.9116 109.371L46.9316 109.381Z',
    segmentId: 'front-shoulder-r'
  },
  {
    // Правое предплечье (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M39.5916 149.711C39.5416 150.051 39.5016 150.391 39.4516 150.711C39.3416 151.461 39.2416 152.181 39.1416 152.871C39.0816 153.271 39.0216 153.671 38.9716 154.051C38.8516 154.841 38.7416 155.581 38.6416 156.291C38.6416 156.301 38.6416 156.321 38.6416 156.341C38.5716 156.791 38.5016 157.241 38.4316 157.661C38.3716 158.041 38.3116 158.411 38.2516 158.771C38.2016 159.041 38.1616 159.311 38.1216 159.571C38.0716 159.861 38.0216 160.141 37.9716 160.421C37.9116 160.721 37.8616 161.021 37.8116 161.301C37.6416 162.181 37.4716 163.001 37.2916 163.771C37.2616 163.901 37.2316 164.041 37.1916 164.171C36.9116 165.321 36.6216 166.361 36.2816 167.341C35.1616 170.641 34.2216 172.411 33.3116 174.131C32.2716 176.101 31.1916 178.141 29.8116 182.601C28.4816 186.911 27.7616 190.561 27.3816 193.001C27.2116 194.071 27.1116 194.911 27.0516 195.461C26.9716 196.221 26.9216 196.811 26.8916 197.321C26.6116 197.011 26.2416 196.541 25.5616 195.941C25.2216 195.641 24.8116 195.311 24.2816 194.951C24.0716 194.811 23.8716 194.671 23.6716 194.531C23.0116 194.081 22.3716 193.691 21.6416 193.421C21.3116 193.291 20.9616 193.181 20.5816 193.101C20.1216 193.001 19.7416 192.971 19.3816 192.971C18.6716 192.971 18.0516 193.111 17.0916 193.141C16.6416 193.161 16.1216 193.141 15.4816 193.101C15.4016 193.101 15.3116 193.091 15.2316 193.081C14.9416 193.051 14.6216 193.021 14.3116 192.971C14.3316 192.841 14.3616 192.711 14.3716 192.571C14.3916 192.441 14.4116 192.311 14.4216 192.181C14.4216 192.101 14.4416 192.011 14.4516 191.931C14.4516 191.861 14.4516 191.791 14.4716 191.721C14.5016 191.351 14.5216 190.981 14.5316 190.611C14.5316 190.361 14.5416 190.101 14.5516 189.841C14.7616 182.671 14.5516 176.521 14.5516 176.451C14.3116 169.601 14.3016 168.791 14.5516 167.111C14.8016 165.441 15.3416 161.971 17.3816 158.171C18.1916 156.651 18.8816 155.801 19.5416 154.971C20.2716 154.061 21.0216 153.121 22.0016 151.241C22.0416 151.171 22.0716 151.101 22.1116 151.021C22.1516 150.951 22.1916 150.861 22.2316 150.781C22.2816 150.691 22.3216 150.601 22.3616 150.511C22.5416 150.141 22.7416 149.701 22.9416 149.221C23.1216 148.791 23.3116 148.301 23.5016 147.791C23.8616 147.661 24.2316 147.541 24.6116 147.431C29.2016 146.071 34.7316 146.051 38.7516 149.001C39.0416 149.201 39.3216 149.431 39.5916 149.671V149.711Z',
    segmentId: 'front-forearm-r'
  },
  {
    // Правая кисть (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M14.5516 193.111C14.4616 193.541 14.3216 194.191 14.0916 194.961C14.0916 194.961 13.8716 195.721 13.6316 196.351C13.0116 197.991 10.6816 200.021 9.00164 201.441C6.04164 203.941 4.55164 205.191 3.91164 205.601C3.66164 205.761 2.95164 206.211 2.19164 207.001C1.84164 207.361 1.23164 208.061 0.721637 209.091C0.421637 209.701 -0.498363 211.541 0.351637 212.401C0.801637 212.861 1.58164 212.891 2.68164 212.511C4.15164 212.001 4.98164 210.901 5.48164 210.211C5.40164 211.601 4.71164 214.701 4.45164 215.851L4.39164 216.141C3.71164 219.231 3.09164 222.341 2.54164 225.411L2.44164 225.961H2.99164C5.65164 225.961 8.31164 225.791 10.9116 225.491C14.7816 225.051 16.9116 224.801 18.9616 223.581C21.6416 221.991 22.9616 219.691 23.7516 218.321C23.8616 218.121 24.0316 217.841 24.2216 217.431C25.2516 215.291 25.2616 213.801 25.6616 209.301C25.7816 207.981 25.8816 206.571 26.1216 204.671C26.1716 204.271 26.5816 201.071 26.5816 199.581C26.5816 199.411 26.5816 198.951 26.5816 198.191C26.5816 197.491 26.5916 197.411 26.5816 197.261C26.5016 196.361 25.9116 195.691 25.6516 195.411C24.9616 194.641 23.9416 194.281 21.9516 193.561C21.5116 193.401 21.0316 193.231 20.5616 193.101C19.5516 192.821 17.5316 192.441 14.5516 193.101V193.111Z',
    segmentId: 'front-hand-r'
  },
  {
    // Левое плечо (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M135.882 143.881C135.882 143.881 135.862 143.831 135.852 143.801C135.292 142.111 134.772 140.151 134.352 137.521C133.482 132.151 133.802 129.041 134.212 125.111C134.392 123.361 134.592 121.461 134.712 119.131C134.712 119.131 134.802 117.351 134.822 115.391C134.912 105.891 132.552 92.0506 130.662 86.7006C130.452 86.1006 130.062 85.2206 129.272 83.4606C127.982 80.5506 127.472 79.7206 126.962 79.7606C126.762 79.7706 126.472 79.9306 126.162 80.6306C125.842 80.8106 125.472 80.9706 125.112 81.1506C124.802 81.3106 124.512 81.4806 124.242 81.6906C123.732 82.0606 123.252 82.5206 122.632 83.1506C122.402 83.3906 122.152 83.6406 121.872 83.9306C121.612 84.2006 121.372 84.4706 121.152 84.7306C120.662 85.3006 120.252 85.8706 119.852 86.4706C119.602 86.8406 119.362 87.2106 119.102 87.6206C118.962 87.8306 118.822 88.0606 118.672 88.3006C118.322 88.8506 117.952 89.4806 117.582 90.2006C117.472 90.4106 117.362 90.6306 117.252 90.8706C117.032 91.3306 116.852 91.7706 116.692 92.2106C116.442 92.8806 116.252 93.5506 116.072 94.3106C115.912 94.9406 115.762 95.6406 115.592 96.4506L115.152 98.5906C115.012 99.3206 114.882 100.011 114.782 100.741C114.672 101.431 114.592 102.141 114.542 102.911C114.522 103.211 114.502 103.521 114.482 103.841C114.482 103.901 114.482 103.891 114.482 105.091V112.631C114.482 112.941 114.482 113.201 114.482 113.451L114.402 113.841L114.352 114.081L114.012 115.781L114.342 119.001C114.512 120.451 114.712 121.901 114.932 123.341C115.492 127.061 116.012 129.411 116.462 131.491C116.742 132.791 117.012 134.011 117.242 135.381C118.062 140.211 117.942 142.901 117.832 145.511C117.802 146.231 117.772 146.961 117.752 147.741C122.632 143.251 129.572 142.421 135.882 143.901V143.881Z',
    segmentId: 'front-shoulder-l'
  },
  {
    // Левое предплечье (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M146.772 195.081C146.732 194.921 146.682 194.761 146.652 194.601C146.652 194.591 146.652 194.571 146.642 194.561C145.212 189.241 144.042 183.751 143.152 178.231C142.402 173.551 142.162 170.751 141.952 168.281C141.732 165.681 141.542 163.431 140.832 159.711C139.642 153.441 138.342 150.191 137.192 147.331C136.812 146.381 136.432 145.441 136.082 144.431C136.022 144.251 135.962 144.061 135.892 143.881C129.582 142.401 122.642 143.231 117.762 147.721C117.732 149.401 117.802 151.311 118.172 153.861C118.442 155.731 118.642 156.261 119.222 157.841C119.832 159.481 120.832 162.211 122.812 168.721C123.442 170.811 124.002 172.701 124.512 174.461C126.692 181.911 128.132 186.831 131.632 193.321C131.752 193.561 131.932 193.811 132.122 194.101C132.532 194.711 133.042 195.461 133.462 196.511L133.532 196.691C133.722 196.531 133.962 196.351 134.302 196.111C134.562 195.921 134.882 195.701 135.282 195.411C135.482 195.261 135.672 195.131 135.852 195.001C136.832 194.281 137.372 193.871 137.702 193.611C138.152 193.261 138.232 193.211 138.522 193.091C138.982 192.911 139.442 192.801 139.882 192.741C140.812 192.621 141.652 192.721 142.242 192.841C142.752 192.941 143.082 193.071 143.142 193.091C143.432 193.201 143.702 193.331 143.952 193.471C144.182 193.601 144.352 193.721 144.392 193.751C144.692 193.951 145.312 194.321 146.762 195.061L146.772 195.081Z',
    segmentId: 'front-forearm-l'
  },
  {
    // Левая кисть (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M163.482 208.521C163.292 209.101 162.712 209.521 161.762 209.751C159.172 210.381 156.212 207.631 154.572 205.781C154.462 206.951 154.512 208.101 154.702 209.231C155.042 211.201 155.722 212.451 156.442 213.781C156.972 214.751 157.512 215.751 157.922 217.041C158.682 219.471 158.682 222.211 157.922 225.161L157.842 225.491L157.502 225.511C153.382 225.751 147.342 225.281 141.952 221.731C141.022 221.121 139.302 219.991 137.682 217.931C134.462 213.851 134.042 209.241 133.882 207.511C133.692 205.351 133.852 203.751 134.002 202.341C134.142 200.911 134.272 199.701 133.982 198.271C133.912 197.881 133.792 197.481 133.652 197.051C133.642 197.011 133.622 196.971 133.612 196.931C133.842 196.661 134.082 196.401 134.312 196.171C134.852 195.621 135.362 195.181 135.712 194.901C136.022 194.651 136.202 194.521 136.202 194.521C136.682 194.191 137.152 193.851 137.652 193.571C138.312 193.191 139.012 192.891 139.862 192.741C140.022 192.711 140.192 192.691 140.362 192.671C140.952 192.611 141.612 192.631 142.272 192.731C143.092 192.841 143.902 193.071 144.572 193.411C145.162 193.701 145.632 194.081 145.912 194.531C146.032 194.721 146.282 195.221 146.842 195.461C147.212 195.621 147.572 195.601 147.852 195.551C151.162 196.871 151.182 196.881 151.192 196.881C152.772 197.581 153.252 198.011 157.002 201.331C158.142 202.341 159.602 203.631 161.492 205.291C162.442 206.121 163.862 207.361 163.472 208.561L163.482 208.521Z',
    segmentId: 'front-hand-l'
  },
  {
    // Гениталии (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M89.4917 191.261H71.4517V210.691H89.4917V191.261Z',
    segmentId: 'front-abdomen'
  },
  {
    // Правое бедро (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M79.7716 210.691C79.7716 210.691 79.7716 210.821 79.7716 210.921C79.7516 211.541 79.7716 212.001 79.7716 212.081C79.7916 212.441 79.7316 213.461 79.4616 216.191C79.0416 217.761 78.6716 219.361 78.3816 220.951C77.3116 226.741 77.4416 229.961 77.6016 233.691C77.7216 236.601 77.8516 239.881 77.4716 244.951C77.2316 248.041 76.9816 249.491 76.7016 251.171C76.4016 252.991 76.0516 255.051 75.6216 259.761C75.2216 264.031 75.1316 266.491 75.0316 268.861C74.9616 270.631 74.8916 272.461 74.6916 275.021C74.1516 282.011 73.4016 285.411 72.7316 288.431C72.4116 289.891 72.1116 291.231 71.8716 292.831C71.1016 293.171 70.3416 293.441 69.6016 293.651C68.8516 293.861 68.1316 294.011 67.4416 294.111C66.6516 294.241 65.9216 294.301 65.2616 294.351C64.8216 294.381 64.4216 294.401 64.0516 294.411C63.7516 294.421 63.4316 294.441 63.0716 294.441C62.4216 294.461 61.6916 294.461 60.8816 294.411C60.2016 294.371 59.4816 294.301 58.7016 294.181C58.0216 294.071 57.3116 293.931 56.5616 293.731C56.2916 293.661 56.0016 293.581 55.7216 293.491C55.3316 293.371 54.9116 293.241 54.4816 293.101C53.8316 292.881 53.1516 292.641 52.4716 292.351C51.8216 292.071 51.1816 291.741 50.5716 291.351C49.9316 290.941 49.3316 290.461 48.7916 289.891C48.7916 281.771 48.7816 272.341 48.7716 261.631C45.9416 248.431 44.2316 235.041 43.6816 221.811C43.4216 215.561 43.2016 202.751 44.6116 187.051C45.0616 181.991 45.5016 178.881 45.9216 175.871C46.1616 174.161 46.4016 172.491 46.6216 170.541C46.7216 170.551 46.8316 170.571 46.9316 170.601C46.9316 170.701 46.9216 170.801 46.9216 170.911C46.9216 171.331 46.9416 171.761 46.9216 172.761C46.9016 173.541 46.8816 173.561 46.9216 173.691C47.1216 174.321 47.9616 174.501 48.9816 174.741C49.3516 174.831 49.7516 174.931 50.1616 175.071C50.6116 175.231 50.8816 175.361 51.1616 175.551C51.5616 175.811 52.0016 176.191 53.0716 176.891C53.3016 177.041 53.5616 177.201 53.8616 177.391C54.3516 177.701 54.7316 177.911 55.0416 178.081C55.8116 178.511 56.2116 178.671 57.0916 179.161C57.3516 179.301 57.6516 179.481 58.0216 179.701C58.3716 179.911 58.7216 180.131 59.0816 180.341C59.7016 180.731 60.3416 181.151 61.0116 181.631C61.5416 182.021 62.0816 182.441 62.6416 182.931C62.7016 182.981 62.7616 183.031 62.8116 183.081C63.6616 183.831 63.6716 183.971 64.4316 184.751C64.6716 185.001 64.9816 185.301 65.4216 185.711C65.6716 185.941 65.9016 186.151 66.1116 186.341C66.8716 187.021 67.4316 187.471 67.8816 187.821C68.6316 188.411 69.0716 188.721 69.6216 189.351C69.7516 189.501 69.8916 189.671 70.0416 189.861C70.4216 190.361 70.6816 190.781 71.1516 191.091C71.2316 191.151 71.3216 191.201 71.4216 191.251V210.681H79.7516L79.7716 210.691Z',
    segmentId: 'front-thigh-r'
  },
  {
    // Правая голень (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M73.6617 329.471C73.1717 332.601 72.4417 337.341 71.4417 347.671C71.2817 349.311 71.0417 351.941 70.7817 355.291C70.6717 356.671 70.5617 358.181 70.4517 359.791C69.4717 360.431 68.5617 360.861 67.8917 361.131C67.2317 361.391 66.8117 361.501 66.8117 361.501C66.4117 361.601 66.0117 361.681 65.6217 361.731C64.8217 361.841 64.0517 361.841 63.2717 361.771C62.5117 361.711 61.7417 361.571 60.9717 361.391C60.2417 361.221 59.5117 361.021 58.7417 360.791C58.5017 360.721 58.2617 360.651 58.0217 360.581C58.0217 360.581 57.4417 360.411 56.5417 360.091C55.7417 359.811 54.7017 359.411 53.5717 358.921C53.5217 358.431 53.4617 357.931 53.4017 357.411C53.3117 356.631 53.2217 355.801 53.1117 354.931C52.6317 350.891 51.9417 345.931 50.6317 340.821L50.5817 340.621C50.1017 338.751 48.8217 333.801 48.7717 327.291C48.7717 326.881 48.7717 326.571 48.7717 326.411V326.361C48.8017 322.861 48.8117 310.861 48.7917 290.571C48.7917 290.411 48.7917 290.241 48.7917 290.081V289.911C49.3317 290.481 49.9317 290.961 50.5717 291.371C51.1817 291.771 51.8217 292.091 52.4717 292.371C53.1517 292.671 53.8317 292.911 54.4817 293.121C54.9117 293.261 55.3217 293.381 55.7217 293.511C56.0117 293.601 56.2917 293.681 56.5617 293.751C57.3117 293.951 58.0217 294.101 58.7017 294.201C59.4817 294.321 60.2017 294.391 60.8817 294.431C61.6917 294.481 62.4217 294.481 63.0717 294.461C63.4217 294.461 63.7517 294.441 64.0517 294.431C64.4217 294.421 64.8217 294.401 65.2617 294.371C65.9217 294.331 66.6517 294.261 67.4417 294.131C68.1217 294.031 68.8517 293.881 69.6017 293.671C70.3417 293.461 71.1017 293.191 71.8717 292.851C71.6917 294.091 71.5417 295.501 71.4517 297.231C71.1417 303.011 71.8017 305.831 72.5617 309.091C73.2417 311.991 74.0017 315.271 74.2317 321.251C74.3717 324.961 74.1717 326.291 73.6717 329.481L73.6617 329.471Z',
    segmentId: 'front-leg-r'
  },
  {
    // Правая стопа (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M70.9816 404.601C70.6316 406.691 69.9916 408.751 69.0916 410.731L68.9616 411.011H68.6516C65.9216 410.911 61.8116 410.261 57.7716 407.691C55.5116 406.251 50.1116 402.171 48.7816 395.361C48.0116 391.441 48.9016 388.081 49.6816 385.111L49.7116 384.981C50.3816 382.441 51.1316 380.941 51.8516 379.481C52.2216 378.731 52.6016 377.961 52.9716 377.051C54.9416 372.201 54.5516 367.591 53.5716 358.901C54.7016 359.391 55.7416 359.791 56.5416 360.071C57.4516 360.391 58.0216 360.561 58.0216 360.561C58.2616 360.631 58.5016 360.701 58.7416 360.771C59.5116 361.001 60.2516 361.201 60.9716 361.371C61.7516 361.551 62.5116 361.681 63.2716 361.751C64.0416 361.821 64.8216 361.811 65.6216 361.711C66.0116 361.661 66.4116 361.591 66.8116 361.481C66.8116 361.481 67.2316 361.371 67.8916 361.111C68.5616 360.841 69.4716 360.411 70.4516 359.771C70.1016 364.911 69.7716 371.091 69.5816 377.691C69.4416 383.041 69.3516 385.991 69.5816 388.271C69.8116 390.641 70.1716 392.641 70.4816 394.401C71.0916 397.781 71.6016 400.711 70.9616 404.581L70.9816 404.601Z',
    segmentId: 'front-feet-r'
  },
  {
    // Левое бедро (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M116.112 217.851C116.112 218.351 116.112 218.861 116.112 219.371C116.092 221.821 116.052 224.201 115.992 226.471C115.982 227.031 115.962 227.601 115.942 228.171C115.942 228.451 115.922 228.731 115.912 229.001C115.892 229.531 115.872 230.071 115.852 230.611C115.432 240.881 114.702 245.721 114.002 250.401C113.802 251.741 113.592 253.081 113.392 254.571C112.962 256.941 112.482 259.291 111.972 261.631C111.972 272.341 111.952 281.771 111.952 289.891C111.962 290.201 112.012 291.941 110.762 293.041C110.462 293.291 110.142 293.481 109.832 293.611C109.262 293.861 108.722 293.921 108.452 293.961C108.082 294.011 107.872 294.001 107.652 293.961C107.402 293.941 107.132 293.901 106.602 293.961C106.052 294.011 105.752 294.091 105.462 294.171C105.162 294.261 104.862 294.361 104.292 294.421C104.002 294.451 103.922 294.451 103.292 294.431C103.002 294.431 102.582 294.431 101.982 294.421C101.642 294.421 101.362 294.421 101.112 294.421C100.542 294.421 100.152 294.421 99.7316 294.421C99.4016 294.421 99.1316 294.431 98.9216 294.441C98.1216 294.471 97.9916 294.511 97.5216 294.441C97.4316 294.431 97.4216 294.431 96.7216 294.251C96.4416 294.181 96.0516 294.081 95.5116 293.941C95.2016 293.871 94.8716 293.781 94.5716 293.701C94.4716 293.681 94.3716 293.651 94.2816 293.631C93.9216 293.541 93.6616 293.481 93.6616 293.481C93.6616 293.481 93.0416 293.181 92.4916 292.901C92.2216 292.771 91.9716 292.641 91.8116 292.551C91.4616 292.361 91.0416 292.101 90.5816 291.751C90.1416 291.401 89.6516 290.951 89.1516 290.371C89.1416 290.271 89.1316 290.171 89.1116 290.061C89.0916 289.831 89.0616 289.601 89.0416 289.361C88.3916 283.761 87.3716 279.781 86.6216 276.871C86.5016 276.391 86.3816 275.951 86.2816 275.541C86.0016 274.431 85.7616 273.111 85.5416 271.591C85.4816 270.601 85.4516 269.721 85.4216 268.851C85.3316 266.481 85.2316 264.021 84.8316 259.751C84.7116 258.501 84.6016 257.441 84.5016 256.521C84.4416 253.791 84.4116 250.831 84.4216 247.681C84.4516 241.731 83.9416 235.591 82.9216 229.311C82.8916 227.001 82.6816 224.441 82.0316 220.941C81.6616 219.011 81.2716 217.381 80.9316 216.181C80.4416 215.201 79.9116 213.801 79.7916 212.071C79.7916 212.041 79.7916 212.021 79.7916 211.991V211.941C79.7916 211.941 79.7916 211.941 79.7916 211.931V211.871C79.7916 211.821 79.7916 211.771 79.7916 211.721C79.7916 211.561 79.7916 211.351 79.7916 211.121C79.7916 211.061 79.7916 210.981 79.7916 210.921C79.7916 210.891 79.7916 210.871 79.7916 210.841C79.7916 210.841 79.7916 210.821 79.7916 210.811C79.7916 210.771 79.7916 210.731 79.7916 210.691H89.0416V191.261C89.1416 191.211 89.2316 191.161 89.3216 191.101C89.8016 190.791 90.0616 190.371 90.4516 189.871C90.5916 189.681 90.7316 189.521 90.8616 189.371C90.8616 189.371 90.8616 189.371 90.8616 189.361C91.4016 188.551 92.0516 188.021 92.4816 187.731C92.5716 187.661 92.6616 187.611 92.7316 187.561C93.2016 187.271 93.1516 187.391 93.4416 187.181C93.8816 186.871 94.0416 186.571 94.2416 186.231C94.3316 186.071 94.4416 185.911 94.5816 185.721C95.0016 185.171 95.3116 185.061 95.9216 184.641C96.2316 184.431 96.6116 184.141 97.1216 183.681C97.3716 183.461 97.5716 183.271 97.6916 183.151C97.7116 183.131 97.7316 183.111 97.7516 183.091C97.8116 183.041 97.8616 182.991 97.9216 182.941C98.4716 182.471 98.9816 182.071 99.4916 181.701C99.5216 181.681 99.5516 181.651 99.5716 181.641C100.202 181.191 100.812 180.791 101.412 180.421C101.452 180.401 101.482 180.371 101.522 180.351C101.892 180.131 102.242 179.921 102.602 179.711C102.912 179.521 103.172 179.371 103.402 179.241C103.472 179.201 103.522 179.181 103.542 179.171C104.102 178.871 104.942 178.341 105.382 178.051C105.562 177.931 105.672 177.861 105.672 177.861C106.542 177.281 106.972 176.991 107.062 176.931C107.152 176.871 107.242 176.811 107.322 176.771C108.402 176.091 108.522 176.131 109.312 175.591C109.332 175.581 109.352 175.561 109.372 175.551C110.032 175.091 110.192 174.901 110.762 174.621C110.972 174.521 111.132 174.451 111.302 174.371C111.422 174.311 111.552 174.251 111.692 174.151C111.852 174.051 111.982 173.941 112.102 173.821C112.272 173.671 112.402 173.511 112.512 173.371C112.552 173.321 112.582 173.271 112.622 173.221C112.742 173.411 112.922 173.731 113.082 174.151C113.782 175.881 113.582 177.451 113.542 177.851C113.312 180.141 114.342 184.181 114.932 188.921C115.402 195.531 116.112 205.511 116.112 217.861V217.851Z',
    segmentId: 'front-thigh-l'
  },
  {
    // Левая голень (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M111.962 292.891V293.021C111.932 297.431 111.862 303.061 111.702 310.621C111.392 325.371 111.122 328.721 110.312 333.361C109.512 337.891 108.652 340.951 107.902 343.641C106.912 347.171 106.102 350.031 105.782 354.851C105.752 355.351 105.722 355.881 105.702 356.431C105.682 356.921 105.662 357.411 105.642 357.911C105.642 357.951 105.642 358.001 105.642 358.041C105.392 358.211 105.142 358.361 104.892 358.511C104.822 358.551 104.762 358.591 104.692 358.631C104.542 358.711 104.402 358.801 104.262 358.871C104.202 358.901 104.152 358.931 104.092 358.951C103.432 359.301 102.852 359.551 102.382 359.741C102.322 359.761 102.262 359.791 102.202 359.811C101.632 360.031 101.282 360.121 101.282 360.121C100.982 360.201 100.692 360.271 100.402 360.331C100.342 360.341 100.272 360.361 100.212 360.371C99.5616 360.501 98.9416 360.581 98.3516 360.621C98.2816 360.621 98.2216 360.621 98.1516 360.621C97.4916 360.661 96.8716 360.641 96.3116 360.611C96.2416 360.611 96.1816 360.611 96.1116 360.601C95.4016 360.541 94.7916 360.441 94.2916 360.341C94.2316 360.331 94.1616 360.311 94.1016 360.301C93.8216 360.241 93.5916 360.181 93.4116 360.131C93.4116 360.131 92.9916 360.021 92.3516 359.771C92.2916 359.751 92.2316 359.731 92.1716 359.711C91.6816 359.521 91.1016 359.271 90.4616 358.951C90.4116 358.931 90.3616 358.901 90.3116 358.871C90.1516 358.791 90.0016 358.701 89.8316 358.611C89.7616 358.571 89.6916 358.531 89.6216 358.491C89.3716 358.341 89.1116 358.181 88.8516 358.011C88.8516 357.891 88.8316 357.771 88.8216 357.641C88.8116 357.441 88.7916 357.231 88.7716 357.021C88.7716 356.951 88.7616 356.871 88.7516 356.801C88.7416 356.601 88.7216 356.391 88.7016 356.181C88.5816 354.651 88.4516 352.911 88.3116 350.911C88.2816 350.431 88.2416 349.971 88.2116 349.531C87.9016 345.141 87.7016 341.991 87.3916 337.061C86.2816 319.601 86.4016 317.691 86.9316 314.721C87.3816 312.121 87.8916 310.581 88.3316 309.221C88.9016 307.471 89.3816 305.961 89.7016 302.731C89.8116 301.621 90.0916 297.661 89.3916 290.841C89.3916 290.781 89.3916 290.721 89.3716 290.661C89.3716 290.581 89.3616 290.491 89.3516 290.411C89.8116 290.931 90.2516 291.351 90.6616 291.691C90.7016 291.731 90.7416 291.761 90.7816 291.791C91.2416 292.151 91.6516 292.411 92.0116 292.591C92.1416 292.661 92.3216 292.761 92.5316 292.861C92.5816 292.891 92.6416 292.911 92.6916 292.941C93.2516 293.221 93.8616 293.521 93.8616 293.521C93.8616 293.521 94.1216 293.581 94.4816 293.671C94.5216 293.671 94.5516 293.691 94.5916 293.701C94.6516 293.711 94.7116 293.731 94.7816 293.741C95.0816 293.821 95.4216 293.911 95.7216 293.981C96.1516 294.091 96.4816 294.171 96.7416 294.241C96.8116 294.251 96.8716 294.271 96.9316 294.291C97.6316 294.471 97.6416 294.471 97.7316 294.481C97.8716 294.501 97.9816 294.511 98.0816 294.511C98.0816 294.511 98.1016 294.511 98.1116 294.511C98.3216 294.511 98.5216 294.511 98.9316 294.481C98.9916 294.481 99.0616 294.481 99.1316 294.481C99.3516 294.481 99.6116 294.471 99.9416 294.461C100.162 294.461 100.382 294.461 100.622 294.461C100.782 294.461 100.942 294.461 101.122 294.461H101.322C101.572 294.461 101.862 294.461 102.192 294.461C102.542 294.461 102.822 294.461 103.062 294.461H103.312C103.382 294.461 103.452 294.461 103.512 294.461C103.722 294.461 103.882 294.461 103.992 294.461C104.222 294.461 104.322 294.461 104.512 294.441C104.962 294.391 105.252 294.321 105.492 294.251C105.562 294.231 105.622 294.211 105.682 294.191C105.972 294.111 106.272 294.021 106.822 293.981C106.962 293.971 107.082 293.961 107.192 293.961C107.392 293.961 107.542 293.961 107.672 293.961C107.742 293.961 107.812 293.971 107.872 293.981C107.942 293.981 108.022 293.991 108.102 294.001H108.132C108.272 294.001 108.442 294.001 108.682 293.971C108.932 293.941 109.382 293.881 109.882 293.691C109.942 293.671 110.002 293.651 110.062 293.621C110.602 293.391 110.562 293.221 110.992 293.051C111.352 292.901 111.702 292.881 111.982 292.901L111.962 292.891Z',
    segmentId: 'front-leg-l'
  },
  {
    // Левая стопа (перед)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M110.302 393.881C110.262 397.341 110.242 399.071 109.332 401.011C107.772 404.321 104.812 405.871 102.192 407.241C98.2316 409.311 93.8016 410.411 89.0316 410.531H88.6416L88.5716 410.161C87.7016 405.841 87.3916 401.441 87.6416 397.091C87.7816 394.681 88.0416 393.061 88.3516 391.191C88.5616 389.881 88.8016 388.401 89.0316 386.431C89.6516 381.111 89.5816 377.371 89.4916 371.701C89.4316 367.931 89.2716 366.001 88.9016 361.331C88.8316 360.371 88.7416 359.271 88.6316 357.991C88.6316 357.931 88.5616 357.641 88.6016 357.621C88.6416 357.611 88.7516 357.821 88.8316 357.991C89.0816 358.161 89.3416 358.321 89.6016 358.471C89.6716 358.511 89.7416 358.551 89.8116 358.591C89.9716 358.681 90.1316 358.771 90.2916 358.851C90.3416 358.881 90.3916 358.911 90.4416 358.931C91.0816 359.251 91.6716 359.511 92.1516 359.691C92.2116 359.711 92.2716 359.731 92.3316 359.751C92.9816 360.001 93.3916 360.111 93.3916 360.111C93.5716 360.161 93.8116 360.221 94.0816 360.281C94.1416 360.291 94.2016 360.311 94.2716 360.321C94.7616 360.431 95.3816 360.521 96.0916 360.581C96.1516 360.581 96.2216 360.581 96.2916 360.591C96.8516 360.631 97.4716 360.641 98.1316 360.601C98.1916 360.601 98.2616 360.601 98.3316 360.601C98.9216 360.561 99.5416 360.481 100.192 360.351C100.252 360.351 100.312 360.331 100.382 360.311C100.672 360.251 100.962 360.191 101.262 360.101C101.262 360.101 101.612 360.001 102.182 359.791C102.242 359.771 102.302 359.741 102.362 359.721C102.832 359.531 103.412 359.281 104.072 358.931C104.132 358.911 104.182 358.871 104.242 358.851C104.382 358.781 104.532 358.691 104.672 358.611C104.742 358.571 104.802 358.531 104.872 358.491C105.122 358.351 105.372 358.191 105.622 358.021C105.612 358.281 105.602 358.541 105.592 358.811C105.582 359.141 105.572 359.471 105.562 359.801C105.442 364.401 105.572 369.241 107.062 374.781C107.132 375.051 107.222 375.361 107.312 375.711C107.842 377.611 108.632 380.481 109.382 384.541C110.072 388.281 110.352 390.991 110.312 393.881H110.302Z',
    segmentId: 'front-feet-l'
  },
  {
    // Голова (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M101.824 30.1606C100.914 31.2906 99.8439 31.3806 99.0439 32.9406C98.7539 33.5106 98.6539 33.9906 98.5839 34.3306C97.9539 37.3606 97.4039 41.4306 97.1939 42.6606C96.7039 45.6506 95.5839 47.7906 94.8839 49.1406C94.6439 49.5906 94.4039 50.0406 94.1639 50.4906C94.0639 50.3706 93.9539 50.2406 93.8439 50.1006C93.6639 49.8906 93.4839 49.6706 93.2839 49.4506C92.8439 48.9506 92.3239 48.4106 91.7439 47.9206C91.5439 47.7506 91.3439 47.5906 91.1239 47.4306C90.7339 47.1406 90.3239 46.8906 89.9239 46.6806C89.2439 46.3106 88.5639 46.0406 87.8939 45.8306C87.1339 45.5906 86.4139 45.4406 85.7539 45.3306C85.1639 45.2406 84.6339 45.1806 84.1839 45.1306C83.9439 45.1006 83.7539 45.0806 83.5739 45.0706C82.7039 44.9906 82.4639 45.0306 81.3839 45.0706C81.3239 45.0706 81.2539 45.0706 81.1839 45.0706C80.4039 45.1006 79.9939 45.1106 79.5539 45.1206C79.4339 45.1206 79.3139 45.1206 79.2039 45.1206C78.3339 45.1406 77.6339 45.1606 77.0139 45.2006C76.1939 45.2506 75.5339 45.3306 74.8439 45.4806C74.7239 45.5106 74.5939 45.5406 74.4639 45.5706C74.4639 45.5706 73.7539 45.7606 72.7539 46.1606C72.1739 46.4006 71.5039 46.7106 70.8139 47.1006C70.6439 47.2006 70.4639 47.3006 70.2939 47.4106C70.0439 47.5706 69.7939 47.7406 69.7939 47.7406C69.5739 47.9006 69.3639 48.0506 69.0639 48.2906C68.7039 48.5706 68.2139 48.9606 67.3939 49.5806C67.1639 49.7606 66.9039 49.9506 66.6239 50.1706C66.6239 50.1706 66.6039 50.1806 66.6039 50.1906C66.5239 50.2506 66.4339 50.3106 66.3539 50.3806C66.3039 50.2706 66.2439 50.1606 66.1939 50.0506C65.3339 48.3306 64.9239 46.9506 64.3439 44.9606C63.5839 42.3606 63.2039 41.0606 62.9539 39.4106C62.9539 39.4106 62.6739 37.5306 61.8639 35.4206C61.7439 35.1006 61.5939 34.8206 61.5639 34.7906C60.6039 33.0606 59.7239 33.3406 58.7839 31.5506C58.7839 31.5506 57.6439 29.3206 58.3239 26.9206C58.6039 25.9306 59.0139 25.6506 59.2539 25.5306C59.8139 25.2506 60.4239 25.4506 60.6439 25.5306C60.4939 24.8606 60.3039 23.9106 60.1839 22.7506C60.0139 21.1506 59.6439 17.3406 61.1139 13.0406C61.7239 11.2506 63.2739 6.91056 67.5939 3.79056C70.9639 1.36056 74.3339 0.90056 76.8439 0.55056C78.2539 0.36056 81.7739 -0.00944006 86.0939 1.01056C88.1739 1.50056 90.4839 2.03056 93.0339 3.79056C94.2739 4.65056 96.4439 6.40056 98.0839 9.34056C99.3339 11.6006 99.7239 13.5606 99.9739 14.8906C100.764 19.0906 100.214 22.8306 99.4739 25.5306C99.8839 25.3006 101.434 24.4706 102.284 25.0706C103.334 25.8106 103.104 28.5606 101.824 30.1606Z',
    segmentId: 'back-head'
  },
  {
    // Шея (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M95.7539 59.9106C95.6139 60.1906 95.4339 60.5506 95.2939 60.8406C94.3839 62.6506 94.4139 62.6106 94.3639 62.6906C94.3139 62.7806 93.5539 64.0606 92.2839 64.9606C91.8839 65.2406 91.2539 65.6206 90.6639 65.9306C90.5639 65.9806 90.4739 66.0306 90.3739 66.0806C89.6539 66.4506 88.9939 66.7006 88.3239 66.9106C87.8839 67.0506 87.4339 67.1806 86.9639 67.3206C86.7039 67.3906 86.4439 67.4606 86.1939 67.5206C85.4339 67.7106 84.7039 67.8506 84.0239 67.9606C81.6139 68.3406 79.7839 68.2806 79.1039 68.2406C78.5439 68.2106 77.9739 68.1806 77.3939 68.1406C77.2639 68.1406 77.1239 68.1206 76.9839 68.1006C76.9239 68.1006 76.8739 68.1006 76.8239 68.0906C74.3939 67.8706 71.8339 67.3206 69.3839 65.4706C69.2639 65.3806 69.1439 65.2806 69.0339 65.1906C68.4139 64.6906 67.8839 64.1606 67.4239 63.6306C66.9039 63.0106 66.4739 62.4006 66.1239 61.8206C65.8139 61.3106 65.5639 60.8206 65.3539 60.3806C65.7139 59.8706 65.9739 59.3606 66.1939 58.8306C67.0439 56.7306 67.0639 54.3806 67.0839 52.9806V52.9306C66.8539 52.5606 66.6339 52.1906 66.4139 51.7806C66.3439 51.6406 66.2639 51.4906 66.1839 51.3506C66.0839 51.1606 65.9839 50.9606 65.8839 50.7606C66.0939 50.6006 66.3339 50.4206 66.6139 50.2106C66.6139 50.2106 66.6239 50.2006 66.6339 50.1906C66.9239 49.9706 67.1739 49.7806 67.4039 49.6006C68.2239 48.9806 68.7139 48.5906 69.0739 48.3106C69.3739 48.0706 69.5739 47.9206 69.8039 47.7606C69.8039 47.7606 70.0539 47.5906 70.3039 47.4306C70.4739 47.3206 70.6539 47.2206 70.8239 47.1206C71.5039 46.7306 72.1839 46.4106 72.7639 46.1806C73.7539 45.7706 74.4739 45.5906 74.4739 45.5906C74.6039 45.5606 74.7239 45.5306 74.8539 45.5006C75.5439 45.3506 76.2139 45.2706 77.0239 45.2206C77.6439 45.1806 78.3439 45.1606 79.2139 45.1406C79.3239 45.1406 79.4439 45.1406 79.5639 45.1406C80.0039 45.1406 80.4239 45.1306 81.1939 45.0906C81.2639 45.0906 81.3239 45.0906 81.3939 45.0906C82.4739 45.0406 82.7139 45.0106 83.5839 45.0906C83.7539 45.1006 83.9539 45.1206 84.1939 45.1506C84.6339 45.2006 85.1739 45.2606 85.7639 45.3506C86.4239 45.4606 87.1439 45.6106 87.9039 45.8506C88.5639 46.0606 89.2539 46.3306 89.9339 46.7006C90.3339 46.9206 90.7439 47.1706 91.1339 47.4506C91.3439 47.6106 91.5539 47.7706 91.7539 47.9406C92.3339 48.4306 92.8539 48.9706 93.2939 49.4706C93.4939 49.7006 93.6739 49.9106 93.8539 50.1206C94.0939 50.4106 94.3039 50.6706 94.4839 50.8906C94.0439 51.6806 93.5739 52.4606 93.0539 53.1906C93.1639 54.3506 93.2539 55.2406 93.4139 56.0006C93.5939 56.9006 93.8539 57.6006 94.3039 58.3006C94.3539 58.3706 94.5439 58.6706 94.8539 59.0306C95.0739 59.2906 95.3739 59.6006 95.7739 59.9406L95.7539 59.9106Z',
    segmentId: 'back-neck'
  },
  {
    // Спина (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M129.304 81.7906C129.114 82.0206 128.904 82.2506 128.664 82.5006C128.234 82.9406 127.734 83.4206 127.194 83.9406C126.704 84.4206 126.164 84.9306 125.634 85.4906C125.394 85.7406 125.144 86.0006 124.904 86.2706C124.644 86.5606 124.394 86.8606 124.154 87.1506C123.664 87.7406 123.224 88.3306 122.814 88.9306C122.374 89.5606 121.974 90.1906 121.614 90.8206C121.224 91.4906 120.874 92.1506 120.564 92.8006C120.224 93.4906 119.914 94.1706 119.634 94.8406C119.324 95.5506 119.054 96.2406 118.794 96.9106C118.674 97.2306 118.544 97.5406 118.434 97.8506C118.344 98.0906 118.194 98.4806 118.014 99.0106C117.824 99.5706 117.584 100.301 117.334 101.141C117.144 101.791 116.944 102.511 116.754 103.301C116.584 103.981 116.414 104.711 116.264 105.481C116.224 105.711 116.174 105.941 116.134 106.181C116.034 106.691 115.944 107.191 115.874 107.681C115.754 108.461 115.654 109.191 115.574 109.891C115.484 110.681 115.414 111.421 115.364 112.111C115.304 112.911 115.264 113.661 115.234 114.331C115.234 114.551 115.214 114.761 115.204 114.971C115.184 115.541 115.164 116.071 115.154 116.551C115.144 117.401 115.154 118.121 115.154 118.771C115.154 119.181 115.164 119.571 115.174 119.941C115.184 120.451 115.204 120.941 115.204 121.451C115.204 122.351 115.174 123.141 115.124 123.861C114.844 125.131 114.584 126.401 114.354 127.691C114.264 128.181 114.174 128.681 114.084 129.181C113.524 131.131 112.884 133.311 112.424 137.181C111.964 141.111 111.964 144.731 111.964 151.981V157.071C112.044 158.401 112.164 158.971 111.964 159.851C111.924 160.021 111.884 160.171 111.834 160.331C111.774 160.541 111.694 160.731 111.614 160.921C111.444 161.301 111.244 161.651 111.024 161.971C110.624 162.551 110.154 163.061 109.654 163.551C109.594 163.601 109.544 163.651 109.494 163.711C108.934 164.251 108.364 164.741 107.794 165.191C107.174 165.681 106.564 166.121 105.994 166.511C105.294 166.991 104.634 167.381 104.074 167.701C102.974 168.321 102.254 168.641 102.254 168.641C102.194 168.671 102.124 168.701 102.054 168.721C101.324 169.031 100.624 169.301 99.9338 169.531C99.1938 169.781 98.4738 169.991 97.7538 170.171C97.0138 170.361 96.2738 170.511 95.5238 170.641C94.7838 170.771 94.0438 170.891 93.2738 170.991C92.5438 171.091 91.7938 171.181 91.0238 171.271C90.6138 171.321 90.1939 171.361 89.7639 171.411C89.4239 171.451 89.0839 171.481 88.7639 171.521C87.9639 171.601 87.2138 171.661 86.5038 171.711C85.6938 171.761 84.9439 171.801 84.2339 171.831C83.4039 171.861 82.6438 171.871 81.9638 171.881C81.4238 171.881 80.9438 171.881 80.5038 171.881C80.2438 171.881 79.9738 171.881 79.6938 171.881C78.9938 171.881 78.2538 171.881 77.4338 171.841C76.7238 171.821 75.9738 171.791 75.1738 171.741C74.4638 171.691 73.7038 171.631 72.9138 171.551C72.5338 171.511 72.1338 171.471 71.7338 171.421C71.3838 171.381 71.0238 171.341 70.6738 171.291C69.9438 171.201 69.1938 171.101 68.4338 170.981C67.7138 170.861 66.9838 170.731 66.2138 170.571C65.5138 170.421 64.7838 170.241 64.0138 170.031C63.5238 169.901 63.0138 169.741 62.4838 169.571C62.2938 169.511 62.0838 169.441 61.8538 169.371C61.2538 169.171 60.5238 168.921 59.7238 168.601C59.0638 168.341 58.3638 168.041 57.6538 167.691C56.9838 167.371 56.3138 167.011 55.6738 166.591C55.3138 166.361 54.9538 166.121 54.6238 165.871C54.4438 165.741 54.1738 165.521 53.8438 165.261C53.3438 164.851 52.7238 164.331 52.1338 163.801C51.8738 163.561 51.6238 163.321 51.3838 163.091C50.9338 162.641 50.7338 162.401 50.5438 162.191C50.3938 162.031 50.2538 161.891 49.9938 161.701C49.8638 161.611 49.7338 161.521 49.6138 161.431C49.4938 161.341 49.3938 161.251 49.3038 161.151C49.2138 161.041 49.1338 160.921 49.0738 160.771C48.9238 160.351 49.0438 159.961 49.0738 159.841C49.1538 159.531 49.0738 159.611 49.0738 154.751C49.0738 148.081 49.2838 147.601 49.0738 144.571C48.9538 142.861 48.8438 142.211 48.6138 139.021C48.2438 134.031 48.4038 134.201 48.1538 131.621C47.9538 129.501 47.6538 127.581 47.1038 124.391C46.9938 123.771 46.8838 123.091 46.7638 122.371C46.0838 118.371 46.0038 118.401 45.8338 116.821C45.7238 115.761 45.6838 114.991 45.6638 114.321C45.6538 113.921 45.6438 113.551 45.6338 113.181C45.6138 112.491 45.5838 111.781 45.4838 110.801C45.4538 110.521 45.4238 110.211 45.3738 109.881C45.3138 109.391 45.2438 108.931 45.1538 108.431C45.0338 107.761 44.8938 107.021 44.7038 106.081C44.6238 105.691 44.5438 105.261 44.4538 104.791C44.3838 104.401 44.3138 104.051 44.2438 103.731C44.0538 102.771 43.9038 102.061 43.7338 101.391C43.6738 101.141 43.6038 100.891 43.5338 100.631C43.4738 100.391 43.3138 99.8506 43.0538 99.0906C42.8438 98.4706 42.5738 97.7106 42.2338 96.8406C42.0638 96.4306 41.8838 95.9906 41.6838 95.5406C41.5438 95.2206 41.4038 94.9306 41.2738 94.6506C40.9238 93.9006 40.5838 93.2406 40.1938 92.5206C40.0738 92.3006 39.9538 92.0806 39.8238 91.8406C39.5438 91.3106 39.2838 90.8406 39.0638 90.4206C38.6038 89.5806 38.2338 88.9206 37.8738 88.3506C37.6038 87.9306 37.3438 87.5706 37.0538 87.2106C36.8438 86.9406 36.6238 86.6906 36.4038 86.4606C35.8538 85.8406 35.2938 85.3106 34.7138 84.7706C34.4238 84.5106 34.1238 84.2506 33.8138 83.9706C33.4838 83.6706 33.1738 83.4106 32.8938 83.1906C32.5238 82.8906 32.2138 82.6406 31.9438 82.4406C32.0538 82.2106 32.1638 81.9906 32.2838 81.7606C32.3938 81.5306 32.5138 81.3106 32.6338 81.0806C32.7538 80.8606 32.8738 80.6406 32.9938 80.4206C33.2038 80.0406 33.4238 79.6706 33.6538 79.3006C33.7338 79.1606 33.8338 79.0106 33.9238 78.8706C33.9738 78.7906 34.0238 78.7106 34.0738 78.6306C34.0738 78.6306 34.0738 78.6306 34.0738 78.6206C34.1538 78.4906 34.2538 78.3506 34.3438 78.2206C34.4538 78.0506 34.5638 77.8906 34.6838 77.7306C34.8038 77.5706 34.9138 77.4206 35.0338 77.2606C35.1038 77.1606 35.1838 77.0606 35.2638 76.9606C35.3438 76.8606 35.4238 76.7706 35.5038 76.6606C35.6438 76.4906 35.7838 76.3206 35.9338 76.1506C36.2438 75.8006 36.5538 75.4706 36.8938 75.1306C37.0438 74.9806 37.1938 74.8406 37.3538 74.7006C37.8338 74.2606 38.3438 73.8306 38.9038 73.4206C38.9838 73.3606 39.0638 73.3006 39.1438 73.2506C39.2838 73.1406 39.4338 73.0406 39.5838 72.9406C41.3838 71.7306 42.5038 71.3906 44.5338 70.7806C46.4738 70.1906 49.1338 69.3906 54.0038 67.3506C61.1138 64.3706 63.9938 62.4006 65.4038 60.3706C65.6138 60.8106 65.8638 61.3006 66.1738 61.8106C66.5238 62.4006 66.9538 63.0106 67.4738 63.6206C67.9338 64.1506 68.4638 64.6806 69.0838 65.1806C69.1938 65.2706 69.3138 65.3706 69.4338 65.4606C71.8838 67.3106 74.4438 67.8606 76.8738 68.0806C76.9238 68.0806 76.9738 68.0806 77.0338 68.0906C77.1738 68.1006 77.3038 68.1206 77.4438 68.1306C78.0238 68.1706 78.5938 68.2006 79.1538 68.2306C79.8338 68.2706 81.6739 68.3306 84.0739 67.9506C84.7539 67.8406 85.4838 67.7006 86.2438 67.5106C86.4938 67.4506 86.7539 67.3806 87.0139 67.3106C87.4839 67.1806 87.9438 67.0506 88.3738 66.9006C89.0438 66.6906 89.7038 66.4406 90.4238 66.0706C90.5238 66.0206 90.6138 65.9706 90.7138 65.9206C91.3038 65.6106 91.9438 65.2306 92.3338 64.9506C93.0138 64.4606 93.5638 63.8606 93.9138 63.4006C94.2138 63.0206 94.3838 62.7206 94.4138 62.6806C94.4538 62.6106 94.4339 62.6306 95.0139 61.4806C95.1039 61.2906 95.2138 61.0806 95.3438 60.8306C95.4838 60.5406 95.6638 60.1806 95.8038 59.9006C95.7438 59.8406 95.6738 59.7906 95.6138 59.7306C95.6138 59.7306 95.6338 59.7306 95.6438 59.7306C95.7738 59.8406 95.9138 59.9406 96.0538 60.0406C96.0538 60.0406 96.0738 60.0606 96.0938 60.0706C96.2338 60.1706 96.3738 60.2606 96.5238 60.3506C97.3838 60.8706 98.3538 61.2706 99.4038 61.6906L99.6838 61.8006C99.6838 61.8006 103.814 63.4806 111.744 67.3706C117.504 70.1906 121.504 73.5406 122.954 74.8506C124.344 76.1006 126.254 77.8206 128.174 80.2306C128.494 80.6306 128.814 81.0506 129.134 81.5006C129.204 81.6006 129.284 81.7106 129.354 81.8106L129.304 81.7906Z',
    segmentId: 'back-back'
  },
  {
    // Левое плечо (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M46.2538 119.581C46.2238 119.771 46.1438 120.061 45.9138 120.391C45.7438 121.841 45.5438 123.291 45.3238 124.731C44.7638 128.451 44.2438 130.801 43.7938 132.881C43.5138 134.181 43.2438 135.401 43.0138 136.771C42.5938 139.241 42.4138 141.161 42.3638 142.781C42.3038 144.331 42.3638 145.631 42.4238 146.901C42.4638 147.791 42.5038 148.691 42.5038 149.681V149.961C42.2038 150.151 41.8938 150.321 41.5738 150.471C40.4638 150.981 39.2538 151.251 38.1538 151.391C37.2638 151.511 36.4538 151.531 35.8138 151.531C35.2938 151.531 34.8938 151.511 34.6938 151.491C34.3638 151.471 33.9638 151.451 33.5138 151.391C32.8638 151.311 32.0938 151.171 31.2738 150.861C31.0338 150.781 30.7838 150.681 30.5338 150.561C30.0438 150.331 29.6738 150.121 29.2238 149.811C28.7638 149.501 28.2238 149.091 27.3538 148.481C27.0638 148.281 26.7438 148.051 26.3738 147.791C26.0238 147.551 25.7238 147.351 25.4638 147.171C24.7438 146.691 24.3338 146.431 24.0438 146.251C24.1438 145.971 24.2438 145.691 24.3538 145.391C24.8338 143.971 25.2838 142.371 25.6738 140.341C25.7538 139.891 25.8438 139.411 25.9238 138.921C26.7938 133.551 26.4738 130.441 26.0638 126.511C25.9138 125.091 25.7538 123.581 25.6438 121.811C25.5138 119.031 25.4438 116.121 25.4538 113.091C25.4638 109.971 25.5638 106.991 25.7238 104.141C26.1738 98.3506 27.2338 93.0206 29.6538 87.4606L30.0838 86.4706C30.5838 85.3006 31.0838 84.1606 31.6138 83.0406C31.6538 82.9606 31.6838 82.8807 31.7238 82.8107C31.7838 82.6807 31.8438 82.5507 31.9138 82.4207C32.1838 82.6207 32.5038 82.8707 32.8638 83.1707C33.1438 83.4007 33.4538 83.6607 33.7838 83.9507C34.0938 84.2207 34.3938 84.4906 34.6838 84.7506C35.2738 85.2906 35.8338 85.8207 36.3738 86.4407C36.5938 86.6807 36.8038 86.9307 37.0238 87.1907C37.3138 87.5507 37.5738 87.9107 37.8438 88.3307C38.2038 88.9007 38.5738 89.5607 39.0338 90.4007C39.2638 90.8207 39.5138 91.2906 39.7938 91.8206C39.9238 92.0606 40.0438 92.2806 40.1638 92.5006C40.5438 93.2306 40.8938 93.8807 41.2438 94.6307C41.3738 94.9107 41.5138 95.2007 41.6538 95.5207C41.8538 95.9707 42.0338 96.4106 42.2038 96.8206C42.5438 97.6906 42.8238 98.4506 43.0238 99.0706C43.2738 99.8306 43.4338 100.371 43.5038 100.611C43.5738 100.871 43.6438 101.121 43.7038 101.371C43.8738 102.041 44.0238 102.751 44.2138 103.711C44.2838 104.031 44.3538 104.381 44.4238 104.771C44.5138 105.241 44.6038 105.661 44.6738 106.061C44.8638 107.001 45.0038 107.741 45.1238 108.411C45.2138 108.911 45.2838 109.381 45.3438 109.861C45.3938 110.191 45.4238 110.501 45.4538 110.781C45.5638 111.771 45.5838 112.471 45.6038 113.161C45.6038 113.531 45.6138 113.901 45.6338 114.301C45.6538 114.971 45.6938 115.741 45.8038 116.801C45.8638 117.321 45.8838 117.581 45.9238 117.741C46.1038 118.721 46.3538 119.001 46.2738 119.571L46.2538 119.581Z',
    segmentId: 'back-shoulder-l'
  },
  {
    // Левая кисть (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M26.3738 199.131C25.8838 200.901 26.0039 202.371 26.1639 204.281C26.2739 205.571 26.3838 207.031 26.3438 208.871C26.2638 212.541 26.1538 217.111 23.1538 220.281C22.1038 221.391 20.9939 222.031 18.1939 223.171C13.8639 224.921 9.22386 226.331 4.41386 227.361L3.90385 227.471L3.86385 226.951C3.65385 224.461 3.65385 221.941 3.86385 219.471C4.21385 215.271 5.07386 212.101 5.55386 210.581C1.68386 214.281 0.853849 214.251 0.343849 213.861C-0.146151 213.491 0.0138564 212.771 0.163856 212.011C0.593856 209.931 1.73385 208.561 2.11385 208.111C4.86385 204.801 6.23385 203.141 7.17385 201.681C7.58385 201.041 7.75386 200.721 7.94386 200.341C8.16386 199.921 8.40384 199.441 9.02384 198.441C10.4838 196.091 11.7738 194.431 12.2038 193.891L12.2839 193.781C12.6339 193.331 12.9638 192.821 13.2738 192.271C13.4238 192.561 13.5938 192.871 13.7938 193.201C13.9138 193.401 14.0538 193.621 14.2138 193.831C14.6338 194.421 15.1338 195.031 15.7438 195.621C16.0138 195.881 16.3138 196.141 16.6338 196.391C16.9438 196.631 17.2638 196.861 17.6038 197.071C18.2638 197.491 18.9639 197.851 19.6939 198.151C20.7239 198.571 21.2439 198.791 21.9739 198.881C22.8439 198.981 23.6539 198.881 24.3639 198.711C24.8639 198.601 25.3039 198.461 25.6639 198.371C25.9739 198.291 26.2139 198.231 26.3639 198.251C26.4139 198.251 26.6038 198.281 26.7138 198.171C26.5838 198.511 26.4739 198.841 26.3939 199.161L26.3738 199.131Z',
    segmentId: 'back-hand-l'
  },
  {
    // Левое предплечье (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M42.5138 149.981C42.5138 151.461 42.4038 153.141 42.0938 155.281C41.8238 157.151 41.6238 157.681 41.0438 159.261C40.4338 160.901 39.4338 163.631 37.4538 170.141C36.8238 172.231 36.2638 174.121 35.7538 175.881C33.5738 183.331 32.1338 188.251 28.6338 194.741C28.5138 194.981 28.3338 195.231 28.1438 195.521C27.9738 195.771 27.7938 196.041 27.6038 196.351C27.5138 196.501 27.4138 196.671 27.3238 196.841C27.1438 197.161 26.9738 197.531 26.8138 197.931C26.8138 197.961 26.8138 198.061 26.7338 198.141C26.6238 198.261 26.4238 198.231 26.3838 198.221C26.2238 198.211 25.9838 198.261 25.6838 198.341C25.3338 198.441 24.8938 198.571 24.3838 198.681C23.6838 198.841 22.8638 198.951 21.9938 198.851C21.2638 198.761 20.7538 198.541 19.7138 198.121C18.9838 197.821 18.2838 197.461 17.6238 197.041C17.2938 196.831 16.9638 196.601 16.6538 196.361C16.3338 196.111 16.0338 195.861 15.7638 195.591C15.1538 195.001 14.6538 194.401 14.2338 193.801C14.0838 193.591 13.9438 193.371 13.8138 193.171C13.6138 192.851 13.4438 192.541 13.2938 192.241C14.0638 190.871 14.7038 189.261 15.2238 187.631C16.2638 184.391 16.8538 181.111 17.1238 179.611C18.3538 172.751 18.5038 170.071 18.6338 167.711C18.7438 165.861 18.8338 164.271 19.4338 161.101C20.6238 154.831 21.9238 151.581 23.0738 148.721C23.3838 147.951 23.6938 147.181 23.9838 146.381C24.0038 146.331 24.0238 146.281 24.0338 146.241C24.3138 146.421 24.7338 146.681 25.4538 147.161C25.7138 147.341 26.0138 147.541 26.3638 147.781C26.7338 148.031 27.0538 148.271 27.3438 148.471C28.2138 149.081 28.7538 149.491 29.2138 149.801C29.6638 150.111 30.0338 150.331 30.5238 150.551C30.7738 150.671 31.0238 150.761 31.2638 150.851C32.0938 151.161 32.8538 151.301 33.5038 151.381C33.9538 151.441 34.3538 151.461 34.6838 151.481C34.8938 151.491 35.2838 151.511 35.8038 151.521C36.4338 151.521 37.2538 151.501 38.1438 151.381C39.2438 151.251 40.4538 150.971 41.5638 150.461C41.8838 150.311 42.2038 150.151 42.4938 149.951L42.5138 149.981Z',
    segmentId: 'back-forearm-l'
  },
  {
    // Правое плечо (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M136.364 148.081C136.114 148.321 135.864 148.531 135.604 148.741C135.284 149.001 134.954 149.231 134.634 149.451C133.884 149.941 133.174 150.321 132.564 150.581C132.084 150.801 131.674 150.951 131.374 151.051C131.044 151.161 130.704 151.261 130.354 151.351C129.624 151.541 128.864 151.671 128.094 151.761C127.344 151.841 126.574 151.871 125.824 151.841C125.034 151.811 124.274 151.721 123.554 151.551C122.814 151.381 122.144 151.151 121.554 150.821C121.164 150.611 120.814 150.361 120.514 150.081C120.514 150.071 120.514 150.051 120.514 150.041C120.444 149.491 120.364 148.931 120.274 148.351C119.954 146.051 119.724 144.261 119.524 142.671C119.084 139.161 118.784 136.841 117.964 133.091C117.224 129.731 116.314 126.381 115.254 123.131C115.194 123.371 115.144 123.601 115.094 123.841C115.144 123.121 115.174 122.331 115.174 121.431C115.174 120.931 115.164 120.441 115.144 119.921C115.144 119.551 115.124 119.161 115.124 118.751C115.124 118.101 115.114 117.381 115.124 116.531C115.124 116.051 115.154 115.531 115.174 114.951C115.174 114.741 115.194 114.531 115.204 114.311C115.234 113.641 115.274 112.901 115.334 112.091C115.384 111.401 115.454 110.661 115.544 109.871C115.624 109.171 115.724 108.441 115.844 107.661C115.914 107.171 116.004 106.671 116.104 106.161C116.154 105.921 116.194 105.691 116.234 105.461C116.394 104.691 116.554 103.961 116.724 103.281C116.914 102.491 117.114 101.771 117.304 101.121C117.554 100.271 117.794 99.5506 117.984 98.9906C118.164 98.4706 118.314 98.0706 118.404 97.8306C118.524 97.5206 118.644 97.2106 118.764 96.8906C119.014 96.2206 119.294 95.5306 119.604 94.8206C119.884 94.1506 120.194 93.4706 120.534 92.7806C120.844 92.1306 121.204 91.4706 121.584 90.8006C121.954 90.1806 122.344 89.5406 122.784 88.9106C123.194 88.3206 123.634 87.7306 124.124 87.1306C124.364 86.8406 124.614 86.5406 124.874 86.2506C125.114 85.9806 125.364 85.7206 125.604 85.4706C126.144 84.9106 126.674 84.3906 127.164 83.9206C127.704 83.4006 128.204 82.9206 128.634 82.4806C128.874 82.2306 129.084 82.0006 129.274 81.7706C129.374 81.9106 129.474 82.0706 129.584 82.2106C130.524 83.6106 131.444 85.1906 132.244 86.9906C134.544 92.1306 134.904 96.5206 135.064 100.581C135.244 105.021 135.364 108.811 135.434 112.501C135.774 128.461 135.554 135.841 135.524 136.261L135.484 136.681C135.234 139.161 134.904 142.561 135.974 146.741C136.004 146.871 136.034 146.991 136.074 147.121C136.134 147.321 136.184 147.521 136.244 147.711C136.274 147.831 136.314 147.941 136.354 148.051L136.364 148.081Z',
    segmentId: 'back-shoulder-r'
  },
  {
    // Правое предплечье (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M146.554 194.271C146.584 194.351 146.604 194.431 146.634 194.511C146.424 194.901 146.174 195.391 145.724 195.931C145.484 196.231 145.174 196.531 144.794 196.851C144.524 197.071 144.244 197.251 143.944 197.421C143.374 197.741 142.704 198.001 141.804 198.311C141.454 198.431 141.064 198.561 140.634 198.701C140.264 198.821 139.924 198.931 139.624 199.011C138.694 199.261 138.054 199.291 137.394 199.171C137.354 199.171 137.314 199.161 137.274 199.141C136.614 199.011 136.104 198.751 136.014 198.711C135.644 198.521 135.364 198.331 135.144 198.141C134.654 197.721 134.464 197.361 134.154 197.331C134.104 197.331 134.044 197.331 133.984 197.331C133.984 197.261 133.974 197.201 133.964 197.141C133.924 196.831 133.904 196.621 133.874 196.471C133.504 194.221 132.754 190.481 130.474 184.061C128.724 179.121 127.604 176.901 126.624 174.951C125.754 173.221 124.994 171.721 123.994 168.791C122.664 164.901 121.924 160.091 120.664 151.161C120.614 150.821 120.564 150.471 120.514 150.111C120.814 150.391 121.164 150.641 121.554 150.851C122.144 151.171 122.814 151.411 123.554 151.581C124.264 151.741 125.034 151.831 125.824 151.871C126.574 151.901 127.344 151.871 128.094 151.791C128.864 151.711 129.634 151.571 130.354 151.381C130.704 151.291 131.044 151.191 131.374 151.081C131.674 150.981 132.084 150.831 132.564 150.611C133.174 150.341 133.884 149.971 134.634 149.481C134.954 149.271 135.284 149.031 135.604 148.771C135.854 148.571 136.114 148.351 136.364 148.111C136.994 150.141 137.794 151.811 138.264 152.711C138.694 153.551 139.124 154.271 139.574 154.931C140.584 156.411 141.314 157.431 141.904 158.251C142.284 158.791 142.594 159.221 142.864 159.601C144.384 161.831 144.594 164.071 144.964 168.141C145.134 169.931 145.114 170.831 145.044 173.811C145.024 174.861 144.994 176.191 144.964 177.911C144.884 182.891 144.844 185.391 144.964 186.641C145.274 189.891 145.934 192.461 146.554 194.301V194.271Z',
    segmentId: 'back-forearm-r'
  },
  {
    // Правая кисть (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M162.424 215.191C161.814 215.871 160.384 215.491 157.524 213.901C157.244 213.741 156.964 213.581 156.684 213.411C157.174 214.611 157.584 215.841 157.904 217.081C158.624 219.831 158.944 222.671 158.844 225.541V225.901L158.484 225.981C155.504 226.661 152.484 226.821 149.534 226.451C147.234 226.161 144.634 225.831 141.934 224.071C139.054 222.181 137.674 219.741 137.154 218.821C135.674 216.191 135.494 214.241 134.864 207.011L134.794 206.141C134.454 202.271 134.224 199.761 134.074 198.231C134.044 197.871 134.014 197.571 133.984 197.321C134.044 197.311 134.104 197.311 134.154 197.321C134.454 197.361 134.644 197.721 135.144 198.131C135.364 198.321 135.634 198.521 136.014 198.701C136.104 198.741 136.614 199.001 137.274 199.131C137.314 199.141 137.354 199.151 137.394 199.161C138.054 199.281 138.694 199.251 139.624 199.001C139.924 198.921 140.254 198.821 140.634 198.691C141.064 198.551 141.454 198.421 141.804 198.301C142.704 197.991 143.374 197.731 143.944 197.411C144.254 197.241 144.524 197.061 144.794 196.841C145.184 196.531 145.484 196.221 145.724 195.921C146.164 195.381 146.414 194.891 146.634 194.501C146.724 194.781 146.824 195.041 146.914 195.281C147.224 196.091 147.504 196.701 147.694 197.091L147.734 197.171C148.594 198.901 149.114 199.941 150.224 201.151C151.244 202.261 152.364 203.091 153.544 203.961C154.634 204.761 155.754 205.581 156.864 206.681L157.134 206.951C157.424 207.241 157.744 207.551 158.254 208.071C160.694 210.541 161.204 211.281 161.554 211.851C162.344 213.161 163.054 214.491 162.424 215.181V215.191Z',
    segmentId: 'back-hand-r'
  },
  {
    // Левая ягодица (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M80.4938 171.861V207.481C80.4538 207.531 80.4138 207.581 80.3638 207.631C79.9438 208.101 79.3738 208.691 78.6438 209.331C78.5438 209.421 78.4438 209.501 78.3438 209.591C77.7238 210.121 77.1038 210.581 76.4938 210.981C75.8038 211.441 75.1338 211.831 74.5138 212.151C73.7138 212.571 72.9938 212.871 72.4338 213.091C71.8738 213.311 71.4538 213.431 71.2438 213.501C70.9138 213.601 70.5838 213.691 70.2638 213.761C69.4838 213.951 68.7238 214.071 68.0238 214.141C67.2038 214.231 66.4338 214.261 65.7438 214.251C64.8538 214.251 64.0838 214.181 63.4538 214.101C63.0638 214.051 62.7338 214.001 62.4638 213.961C62.0238 213.891 61.5938 213.811 61.1838 213.721C60.4038 213.551 59.6638 213.351 58.9538 213.111C58.1938 212.861 57.4738 212.571 56.8138 212.261C56.0738 211.931 55.3938 211.571 54.7738 211.211C54.0638 210.791 53.4238 210.371 52.8638 209.961C52.1438 209.441 51.5438 208.941 51.0738 208.541C50.8138 208.311 50.6038 208.111 50.4238 207.951C50.4238 207.951 49.8238 207.391 49.3838 206.941C48.9838 206.521 48.6238 205.931 48.1638 204.971C48.0038 204.631 47.8338 204.231 47.6438 203.791C47.5238 203.501 47.3938 203.191 47.2538 202.841C47.0138 202.241 46.7438 201.541 46.4538 200.671C46.3938 200.481 46.3338 200.291 46.2638 200.091C46.0638 199.461 45.8838 198.871 45.7338 198.351C45.5738 197.781 45.4438 197.281 45.3438 196.861C45.2438 196.441 45.1038 195.751 45.0338 194.891C45.1438 193.281 45.2438 191.801 45.3438 190.461C45.3438 190.421 45.3438 190.391 45.3438 190.351C45.9938 181.221 46.6738 175.981 47.2638 171.361C47.2638 171.311 47.2738 171.251 47.2838 171.201C47.6538 168.341 47.9738 165.821 48.2138 162.871C48.4338 162.161 48.9438 160.761 49.0338 160.781C49.0438 160.781 49.0338 160.811 49.0838 160.891C49.1338 160.991 49.1938 161.071 49.2638 161.151C49.3538 161.261 49.4538 161.341 49.5738 161.431C49.6938 161.521 49.8238 161.611 49.9538 161.701C50.2138 161.891 50.3538 162.021 50.5038 162.191C50.6938 162.401 50.8938 162.641 51.3438 163.091C51.5838 163.321 51.8338 163.561 52.0838 163.801C52.6738 164.341 53.2938 164.851 53.7938 165.261C54.1138 165.521 54.3938 165.731 54.5738 165.871C54.9138 166.121 55.2638 166.361 55.6238 166.591C56.2638 167.001 56.9338 167.371 57.6038 167.691C58.3138 168.041 59.0138 168.341 59.6738 168.601C60.4738 168.911 61.2038 169.171 61.8038 169.371C62.0338 169.441 62.2438 169.511 62.4338 169.571C62.9638 169.741 63.4738 169.891 63.9638 170.031C64.7238 170.241 65.4538 170.421 66.1638 170.571C66.9338 170.731 67.6638 170.871 68.3838 170.981C69.1438 171.101 69.8938 171.201 70.6238 171.291C70.9838 171.341 71.3338 171.381 71.6838 171.421C72.0938 171.471 72.4838 171.511 72.8638 171.551C73.6638 171.631 74.4138 171.691 75.1238 171.741C75.9238 171.791 76.6738 171.821 77.3838 171.841C78.2038 171.871 78.9438 171.881 79.6438 171.881C79.9238 171.881 80.1938 171.881 80.4538 171.881L80.4938 171.861Z',
    segmentId: 'back-buttock-l'
  },
  {
    // Правая ягодица (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M116.194 195.831C116.034 196.611 115.854 197.401 115.654 198.221C115.584 198.511 115.514 198.781 115.444 199.051C115.244 199.821 115.044 200.491 114.864 201.081C114.574 201.991 114.314 202.691 114.074 203.241C113.784 203.901 113.544 204.351 113.344 204.701C113.234 204.891 113.124 205.081 113.004 205.271C112.584 205.951 112.144 206.571 111.694 207.131C111.194 207.761 110.684 208.321 110.184 208.811C109.594 209.401 109.014 209.901 108.504 210.311C108.064 210.661 107.664 210.941 107.324 211.181C107.154 211.291 106.934 211.441 106.644 211.621C106.144 211.931 105.464 212.311 104.624 212.711C104.004 213.001 103.284 213.301 102.484 213.571C101.804 213.801 101.064 214.011 100.264 214.191C99.8539 214.281 99.4339 214.361 98.9939 214.431C98.7439 214.471 98.4039 214.521 97.9939 214.571C97.3739 214.641 96.5939 214.711 95.7039 214.731C95.0039 214.741 94.2339 214.731 93.4239 214.641C92.7039 214.571 91.9439 214.451 91.1739 214.261C90.4539 214.091 89.7339 213.861 89.0039 213.561C88.6339 213.411 88.2639 213.241 87.8939 213.041C87.5939 212.881 87.2839 212.711 86.9739 212.521C86.2939 212.111 85.6339 211.661 85.0739 211.261C84.4539 210.821 83.9639 210.451 83.7239 210.261C83.5639 210.141 83.4039 210.011 83.2439 209.891C82.3239 209.171 81.5639 208.501 80.9439 207.931C80.7739 207.771 80.6239 207.631 80.4839 207.491V171.871C80.9139 171.871 81.4039 171.871 81.9439 171.871C82.6239 171.871 83.3739 171.851 84.2139 171.821C84.9139 171.791 85.6739 171.761 86.4839 171.701C87.1939 171.651 87.9539 171.591 88.7439 171.511C89.0639 171.481 89.4039 171.441 89.7439 171.401C90.1739 171.351 90.5939 171.301 91.0039 171.261C91.7839 171.171 92.5339 171.081 93.2539 170.981C94.0239 170.871 94.7639 170.761 95.5039 170.631C96.2539 170.501 96.9839 170.341 97.7339 170.161C98.4539 169.981 99.1839 169.771 99.9139 169.521C100.604 169.291 101.314 169.021 102.034 168.711C102.094 168.681 102.164 168.651 102.234 168.631C102.234 168.631 102.954 168.321 104.054 167.691C104.614 167.381 105.264 166.981 105.974 166.501C106.544 166.111 107.154 165.671 107.774 165.181C108.334 164.731 108.914 164.241 109.474 163.701C109.534 163.641 109.584 163.591 109.634 163.541C110.134 163.051 110.604 162.551 111.004 161.961C111.234 161.641 111.434 161.281 111.594 160.911C111.674 160.721 111.754 160.531 111.814 160.331C111.824 160.111 111.864 159.861 111.944 159.841C112.214 159.801 112.814 162.371 112.874 162.591C113.124 167.041 113.414 170.141 113.734 172.761C113.924 174.381 114.134 175.831 114.344 177.301C114.764 180.301 115.204 183.401 115.654 188.441C115.654 188.451 115.654 188.471 115.654 188.481L115.754 189.601C115.814 190.371 115.874 191.151 115.944 191.931C116.004 192.701 116.054 193.481 116.104 194.261C116.124 194.591 116.144 194.921 116.164 195.251C116.174 195.451 116.194 195.651 116.204 195.851L116.194 195.831Z',
    segmentId: 'back-buttock-r'
  },
  {
    // Левое бедро (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M80.7538 211.911C80.6738 212.551 80.5938 213.191 80.5038 213.831V213.851C80.0938 216.961 79.6938 220.121 79.2738 223.281C77.7738 234.701 76.9838 240.231 76.5638 243.211C76.1038 246.441 76.0138 247.021 75.8638 249.151C75.4638 254.471 75.3638 258.841 75.2638 262.701C75.1238 268.391 75.0138 272.881 73.9938 276.981C73.8938 277.391 73.7738 277.841 73.6538 278.311C73.4238 279.211 73.1638 280.221 72.8938 281.341C72.4338 283.291 71.9438 285.611 71.5438 288.371C71.4238 289.141 71.3238 289.951 71.2238 290.791C70.9538 293.121 70.7938 295.151 70.7138 296.881C70.7138 296.951 70.7138 297.021 70.7138 297.091C70.4438 296.891 70.1538 296.661 69.8238 296.401C69.4638 296.131 69.0638 295.841 68.5738 295.561C68.0238 295.251 67.3738 294.941 66.5638 294.681C66.2938 294.591 65.9938 294.511 65.6838 294.431C65.2638 294.331 64.8438 294.251 64.4438 294.181C64.2338 294.151 64.0138 294.121 63.8238 294.101C63.2438 294.041 62.7238 294.001 62.2938 293.981C61.9838 293.971 61.7238 293.971 61.5238 293.961C61.1138 293.961 60.6438 293.961 60.1238 293.961C59.4738 293.981 58.7438 294.041 57.9538 294.191C57.6138 294.251 57.2638 294.321 56.9038 294.421C56.5238 294.521 56.1738 294.621 55.8538 294.741C55.1838 294.991 54.5738 295.281 53.8638 295.661C53.5138 295.851 53.1538 296.041 52.7438 296.271C52.4738 296.421 52.2138 296.571 51.9738 296.711C51.2338 297.141 50.6238 297.521 50.1038 297.871C49.7938 298.071 49.5238 298.261 49.2738 298.431C48.9238 298.671 48.6238 298.871 48.3538 299.051C48.3138 295.971 48.2938 293.381 48.2938 291.141C48.2938 288.941 48.2938 287.081 48.2938 285.411C48.2938 280.741 48.2938 277.371 48.1138 272.231C47.7238 261.471 46.9838 256.541 46.2638 251.771C45.5638 247.091 44.8338 242.251 44.4138 231.981C43.9038 219.431 44.2338 208.591 44.6938 200.191C44.8038 198.301 44.9038 196.541 45.0138 194.911C45.0138 194.911 45.0138 194.911 45.0238 194.911C45.0238 195.021 45.0438 195.111 45.0538 195.211C45.0538 195.311 45.0738 195.401 45.0838 195.501C45.0838 195.581 45.1038 195.651 45.1138 195.721C45.1538 195.991 45.2038 196.231 45.2438 196.441C45.2738 196.571 45.3038 196.701 45.3238 196.801C45.4338 197.221 45.5638 197.721 45.7138 198.291C45.8638 198.821 46.0438 199.401 46.2438 200.041C46.3038 200.241 46.3738 200.431 46.4338 200.621C46.7338 201.491 46.9938 202.191 47.2338 202.791C47.3738 203.141 47.5038 203.451 47.6238 203.741C47.8138 204.181 47.9838 204.581 48.1438 204.921C48.5938 205.881 48.9538 206.471 49.3638 206.891C49.8038 207.351 50.4038 207.911 50.4038 207.911C50.5838 208.071 50.7938 208.271 51.0538 208.501C51.5238 208.911 52.1138 209.401 52.8438 209.921C53.4038 210.331 54.0438 210.751 54.7538 211.171C55.3738 211.531 56.0538 211.891 56.7938 212.221C57.4638 212.531 58.1738 212.821 58.9338 213.071C59.6338 213.301 60.3738 213.511 61.1638 213.681C61.5838 213.771 62.0038 213.851 62.4438 213.921C62.7138 213.961 63.0538 214.011 63.4338 214.061C64.0638 214.141 64.8338 214.211 65.7238 214.211C66.4138 214.221 67.1838 214.201 68.0038 214.101C68.7138 214.021 69.4638 213.901 70.2438 213.721C70.5638 213.641 70.8938 213.551 71.2238 213.461C71.4338 213.401 71.8538 213.271 72.4138 213.051C72.9738 212.831 73.6938 212.531 74.4938 212.111C75.1138 211.791 75.7738 211.401 76.4738 210.941C77.0738 210.541 77.7038 210.081 78.3238 209.551C78.4238 209.461 78.5238 209.381 78.6238 209.291C79.3238 208.671 79.8838 208.101 80.2938 207.641C80.3138 207.621 80.3238 207.611 80.3438 207.591C80.3938 207.531 80.4338 207.491 80.4738 207.441C80.5638 208.921 80.6438 210.391 80.7338 211.861L80.7538 211.911Z',
    segmentId: 'back-thigh-l'
  },
  {
    // Правое бедро (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M116.574 223.231C116.194 233.591 115.424 237.891 114.534 242.871C113.734 247.321 112.834 252.381 112.124 263.031C112.124 263.121 111.764 268.591 111.554 282.411C111.524 284.541 111.494 286.881 111.464 289.421C111.434 292.661 111.404 296.241 111.394 300.191C110.844 299.701 110.304 298.681 109.124 297.891C108.754 297.641 108.314 297.411 107.784 297.231C107.564 297.161 107.334 297.101 107.074 297.051C106.514 296.941 105.824 296.881 104.874 296.831C104.504 296.811 104.084 296.791 103.624 296.771C103.304 296.761 103.004 296.741 102.704 296.731C101.954 296.701 101.284 296.691 100.524 296.731C100.334 296.731 100.124 296.751 99.9138 296.771C99.4338 296.811 98.9138 296.851 98.3338 296.941C97.6838 297.031 96.9738 297.171 96.1938 297.401C95.8938 297.481 95.5938 297.581 95.2838 297.701C94.9938 297.801 94.6138 297.951 94.1638 298.161C93.6138 298.411 92.9638 298.761 92.2638 299.211C91.8938 299.451 91.5138 299.711 91.1238 300.011C90.8938 300.191 90.6938 300.361 90.4938 300.531C89.7138 301.211 89.2238 301.811 88.8738 302.261C88.8938 301.191 88.8738 300.001 88.8138 298.641C88.6238 295.031 88.1938 292.851 87.6838 290.531C87.6338 290.311 87.5838 290.081 87.5338 289.851C87.4538 289.491 87.3738 289.121 87.2838 288.741C86.6838 285.971 86.0438 282.591 85.5638 276.441C85.3738 273.891 85.2938 272.051 85.2238 270.281C85.1338 267.911 85.0338 265.451 84.6338 261.181C84.2038 256.471 83.8538 254.411 83.5538 252.591C83.4238 251.811 83.3038 251.081 83.1838 250.211C82.9938 248.761 82.8838 247.561 82.7938 246.381C82.2838 239.981 82.0638 231.561 82.0438 230.621C81.9438 226.641 81.9338 225.041 81.9238 224.191C81.9238 223.431 81.9238 223.181 81.8638 222.311C81.7438 220.171 81.5538 218.031 81.3038 215.911C81.1438 214.571 80.9538 213.231 80.7338 211.911C80.6638 211.631 80.5538 211.221 80.4738 210.721C80.3138 209.771 80.2638 208.821 80.2738 208.171C80.2738 207.981 80.2738 207.821 80.2938 207.691C80.3138 207.451 80.3438 207.311 80.3838 207.311C80.4038 207.311 80.4338 207.341 80.4738 207.491C80.6138 207.631 80.7738 207.771 80.9338 207.931C81.5538 208.501 82.3138 209.171 83.2338 209.891C83.3838 210.011 83.5438 210.141 83.7138 210.261C83.9538 210.451 84.4438 210.821 85.0638 211.261C85.6238 211.661 86.2838 212.111 86.9638 212.521C87.2738 212.711 87.5838 212.881 87.8838 213.041C88.2538 213.231 88.6238 213.411 88.9938 213.561C89.7238 213.861 90.4438 214.091 91.1638 214.261C91.9338 214.451 92.6938 214.571 93.4138 214.641C94.2238 214.721 94.9938 214.751 95.6938 214.731C96.5838 214.721 97.3638 214.651 97.9838 214.571C98.4038 214.521 98.7338 214.461 98.9838 214.431C99.4238 214.361 99.8438 214.281 100.254 214.191C101.054 214.011 101.794 213.801 102.474 213.571C103.274 213.301 103.984 213.011 104.614 212.711C105.454 212.321 106.134 211.931 106.634 211.621C106.924 211.441 107.144 211.291 107.314 211.181C107.654 210.951 108.054 210.661 108.494 210.311C109.014 209.901 109.584 209.401 110.174 208.811C110.674 208.321 111.184 207.761 111.684 207.131C112.134 206.571 112.574 205.951 112.994 205.271C113.114 205.081 113.224 204.901 113.334 204.701C113.524 204.361 113.774 203.901 114.064 203.241C114.304 202.681 114.564 201.981 114.854 201.081C115.034 200.501 115.234 199.831 115.434 199.051C115.504 198.791 115.574 198.511 115.644 198.221C115.844 197.401 116.024 196.611 116.184 195.831C116.804 206.391 116.804 216.751 116.564 223.221L116.574 223.231Z',
    segmentId: 'back-thigh-r'
  },
  {
    // Левая голень (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M73.0939 338.421C72.8539 342.241 72.6739 344.961 72.4739 347.971C72.3639 349.511 72.3139 350.191 72.2739 350.761C72.2439 351.211 72.2139 351.601 72.1639 352.301C71.9439 355.531 71.7939 358.101 71.7039 360.171C71.7039 360.411 71.6839 360.651 71.6739 360.871C71.3839 360.691 71.0539 360.511 70.6939 360.341C70.1739 360.091 69.5739 359.851 68.9239 359.661C68.8239 359.631 68.7239 359.601 68.6239 359.581C67.9439 359.401 67.2939 359.331 66.4439 359.281C65.9639 359.251 65.4139 359.231 64.7639 359.201C64.5839 359.201 64.4139 359.181 64.2539 359.181C64.2039 359.181 64.1539 359.181 64.1139 359.181C63.3839 359.151 62.7639 359.141 62.0539 359.181C61.8839 359.181 61.7139 359.201 61.5339 359.211C61.0639 359.251 60.5039 359.311 59.8739 359.411C59.2239 359.521 58.5039 359.671 57.7239 359.891C57.4539 359.961 57.1839 360.041 56.9039 360.141C56.5539 360.251 56.1739 360.391 55.7839 360.531C55.4739 360.641 55.1739 360.771 54.8939 360.891C54.8739 360.661 54.8439 360.431 54.8239 360.191C54.8039 359.991 54.7839 359.791 54.7639 359.581L54.3639 355.501C54.0039 351.851 53.9939 351.771 53.9439 351.481C53.5439 349.171 53.0039 347.271 52.3839 345.061C51.6239 342.371 50.7639 339.311 49.9739 334.781C49.1639 330.141 48.8939 326.791 48.5839 312.041C48.5039 308.171 48.4439 304.801 48.3939 301.851C48.3939 301.141 48.3739 300.451 48.3739 299.791C48.3739 299.551 48.3739 299.321 48.3739 299.091C48.6339 298.921 48.9339 298.711 49.2939 298.471C49.5439 298.291 49.8139 298.111 50.1239 297.911C50.6439 297.561 51.2539 297.171 51.9939 296.751C52.2339 296.611 52.4939 296.461 52.7639 296.311C53.1739 296.081 53.5339 295.881 53.8839 295.701C54.5939 295.331 55.2039 295.031 55.8739 294.781C56.2039 294.661 56.5539 294.551 56.9239 294.461C57.2839 294.371 57.6339 294.291 57.9739 294.231C58.7739 294.091 59.4939 294.031 60.1439 294.001C60.6639 293.981 61.1339 293.991 61.5439 294.001C61.7339 294.001 62.0039 294.001 62.3139 294.021C62.7439 294.041 63.2639 294.071 63.8439 294.141C64.0439 294.161 64.2539 294.191 64.4639 294.221C64.8639 294.281 65.2839 294.361 65.7039 294.471C66.0139 294.541 66.3139 294.631 66.5839 294.721C67.3839 294.981 68.0439 295.281 68.5939 295.601C69.0839 295.881 69.4839 296.171 69.8439 296.441C70.1739 296.691 70.4639 296.931 70.7339 297.131C70.7139 297.491 70.7039 297.831 70.6939 298.161C70.5839 301.421 70.7239 303.411 70.8039 304.151C71.1139 307.381 71.6039 308.891 72.1739 310.641C72.6139 312.011 73.1139 313.551 73.5739 316.151C74.1039 319.121 74.2239 321.031 73.1239 338.461L73.0939 338.421Z',
    segmentId: 'back-leg-l'
  },
  {
    // Правая голень (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M111.484 327.751V328.681C111.424 335.181 110.154 340.141 109.674 342.011L109.624 342.211C107.994 348.571 107.224 355.481 106.854 358.801C106.784 359.441 106.714 360.071 106.644 360.691C106.634 360.811 106.614 360.941 106.604 361.071C105.994 360.731 105.284 360.441 104.444 360.131C104.044 359.981 103.614 359.831 103.154 359.671C102.814 359.551 102.454 359.421 102.074 359.311C101.514 359.131 100.904 358.981 100.224 358.881H100.204C99.6939 358.801 99.1339 358.761 98.5339 358.761C98.0139 358.761 97.5139 358.801 97.0639 358.851C96.0639 358.981 95.2339 359.221 94.5839 359.441C94.3339 359.531 94.1039 359.611 93.9039 359.691C93.4139 359.881 92.5939 360.191 92.2339 360.351C91.7439 360.571 91.0039 361.021 90.1939 362.001C90.1139 361.461 90.0039 360.651 89.9039 359.681C90.0239 354.181 90.0939 351.251 89.9339 349.431C89.9339 349.311 89.9139 349.211 89.9039 349.101C89.5239 345.491 88.7039 341.721 87.0839 334.211C86.5839 331.881 86.2139 329.271 86.0339 326.671C85.9639 325.551 85.9539 324.351 86.0139 322.651C86.2439 316.671 87.0039 313.391 87.6839 310.491C88.0539 308.901 88.4039 307.421 88.6239 305.651C88.6739 305.291 88.7039 304.911 88.7439 304.521C88.8039 303.821 88.8439 303.071 88.8639 302.251C89.2139 301.791 89.7039 301.201 90.4839 300.521C90.6739 300.351 90.8839 300.181 91.1139 300.001C91.5039 299.701 91.8839 299.431 92.2539 299.201C92.9539 298.751 93.6039 298.411 94.1539 298.151C94.6039 297.941 94.9939 297.791 95.2739 297.691C95.5839 297.571 95.8939 297.481 96.1839 297.391C96.9639 297.161 97.6739 297.021 98.3239 296.931C98.8939 296.841 99.4239 296.801 99.9039 296.761C100.114 296.741 100.314 296.731 100.514 296.721C101.274 296.681 101.944 296.691 102.694 296.721C102.984 296.731 103.284 296.751 103.614 296.761C104.084 296.781 104.494 296.801 104.864 296.821C105.814 296.871 106.504 296.931 107.064 297.041C107.314 297.091 107.554 297.151 107.774 297.221C108.304 297.401 108.744 297.631 109.114 297.881C110.294 298.671 110.834 299.691 111.384 300.181C111.364 307.911 111.384 317.051 111.474 327.751H111.484Z',
    segmentId: 'back-leg-r'
  },
  {
    // Левая стопа (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M76.5039 413.281L76.0939 413.331C75.0539 413.461 73.6039 413.591 71.9239 413.591C67.5339 413.591 61.6639 412.691 57.9439 408.551C57.0739 407.581 56.5139 406.661 56.2139 406.171C53.7939 402.161 53.1239 397.681 53.8339 390.161C54.2339 385.901 54.7539 384.201 55.2039 382.691C55.6239 381.321 55.9739 380.131 56.1439 377.221C56.2639 375.131 56.1639 373.971 54.9039 361.131C54.9039 361.051 54.8939 360.971 54.8839 360.891C55.1639 360.771 55.4739 360.641 55.7739 360.531C56.1639 360.381 56.5439 360.251 56.8939 360.141C57.1739 360.051 57.4439 359.971 57.7139 359.891C58.4939 359.671 59.2139 359.521 59.8639 359.411C60.4939 359.311 61.0539 359.251 61.5239 359.211C61.7039 359.201 61.8839 359.181 62.0439 359.181C62.7539 359.141 63.3739 359.161 64.1039 359.181C64.1539 359.181 64.1939 359.181 64.2439 359.181C64.4039 359.181 64.5739 359.191 64.7539 359.201C65.4039 359.231 65.9539 359.251 66.4339 359.281C67.2839 359.331 67.9339 359.401 68.6139 359.581C68.7139 359.601 68.8139 359.631 68.9139 359.661C69.5639 359.851 70.1539 360.091 70.6839 360.341C71.0439 360.511 71.3739 360.691 71.6639 360.871C71.6639 360.971 71.6639 361.061 71.6539 361.151C71.4539 366.191 71.6239 368.031 71.8639 369.781C71.9739 370.511 72.0539 370.961 72.1339 371.311C72.1839 371.541 72.2339 371.721 72.2839 371.911C72.4139 372.401 72.5639 372.951 72.7839 374.411C72.7839 374.421 72.7839 374.441 72.7839 374.461C73.0639 376.301 73.1939 377.791 73.2439 379.121C73.3039 380.631 73.2539 381.921 73.2139 383.251C73.1539 384.891 73.0939 386.591 73.2439 388.791C73.4239 391.411 73.7539 392.631 74.1739 394.171C74.5639 395.591 75.0439 397.371 75.5539 400.781C76.1539 404.791 76.4739 408.861 76.4839 412.881V413.291L76.5039 413.281Z',
    segmentId: 'back-feet-l'
  },
  {
    // Правая стопа (зад)
    matcher: (el) => el.tagName.toLowerCase() === 'path' && (el.getAttribute('d') || '').trim() ===
      'M107.504 394.831C107.404 396.571 107.254 399.241 106.544 401.881C105.834 404.521 104.564 407.121 102.234 408.701C101.004 409.541 99.7538 409.931 97.8538 410.531L97.7838 410.551C95.0938 411.401 92.2738 411.861 89.3838 411.931H89.0038L88.9238 411.561C88.5838 409.851 88.2938 408.111 88.0738 406.381C87.5738 402.471 87.0938 398.771 87.6138 394.351C87.7938 392.821 87.9838 392.051 88.2038 391.161C88.4338 390.251 88.7038 389.171 89.0038 386.951C89.3838 383.951 89.4238 381.671 89.4538 379.991V379.561C89.4538 379.291 89.4538 379.041 89.4738 378.781C89.4738 378.781 89.4738 378.721 89.4738 378.671C89.5238 377.701 89.6438 377.051 89.7438 376.481C89.8338 375.951 89.9238 375.491 89.9138 374.921C89.9138 374.371 89.8338 374.611 89.7338 373.531C89.6738 372.871 89.5638 371.681 89.7338 370.291C89.8838 369.051 90.0638 369.181 90.1938 367.981C90.3038 367.031 90.2338 366.531 90.1938 365.201C90.1738 364.421 90.1538 363.321 90.1938 361.961C91.0038 360.971 91.7438 360.531 92.2338 360.311C92.5938 360.151 93.4038 359.831 93.9038 359.651C94.0938 359.581 94.3238 359.491 94.5838 359.401C95.2338 359.181 96.0638 358.941 97.0638 358.811C97.5138 358.751 98.0138 358.721 98.5338 358.721C99.1438 358.721 99.6938 358.771 100.204 358.841C100.204 358.841 100.214 358.841 100.224 358.841C100.904 358.941 101.514 359.101 102.074 359.271C102.454 359.391 102.814 359.511 103.154 359.631C103.614 359.791 104.044 359.941 104.444 360.091C105.284 360.401 105.994 360.691 106.604 361.031C106.594 361.141 106.584 361.251 106.564 361.361C106.084 365.581 105.564 369.791 105.004 373.971C105.024 374.361 105.044 374.751 105.064 375.141C105.094 375.341 105.134 375.571 105.184 375.821C105.284 376.361 105.394 376.911 105.514 377.461V377.531C105.514 377.531 105.524 377.601 105.534 377.641C105.564 378.111 105.604 378.581 105.644 379.061C105.954 382.481 106.394 384.601 106.784 386.471C107.304 388.981 107.714 390.961 107.504 394.791V394.831Z',
    segmentId: 'back-feet-r'
  }
]

function annotateSvgElements(svgRoot: SVGSVGElement) {
  const candidates = svgRoot.querySelectorAll<SVGGraphicsElement>('path, polygon, rect, circle, ellipse')
  candidates.forEach((el) => {
    const binding = svgElementBindings.find(b => b.matcher(el))
    if (binding) {
      ;(el as unknown as HTMLElement).dataset.segment = binding.segmentId
      // Добавляем cursor pointer для интерактивных элементов
      el.style.cursor = 'pointer'
      // Добавляем обработчики ховера
      el.addEventListener('mouseenter', () => {
        if (!activeIds.value.has(binding.segmentId)) {
          el.style.fill = '#fca5a5'
          el.style.stroke = '#ef4444'
          el.style.strokeWidth = '1'
          el.style.opacity = '0.6'
        }
      })
      el.addEventListener('mouseleave', () => {
        if (!activeIds.value.has(binding.segmentId)) {
          el.style.fill = ''
          el.style.stroke = ''
          el.style.strokeWidth = ''
          el.style.opacity = ''
        }
      })
    }
  })
}

// Получение координат сегментов
function getFrontSegmentMap() {
  const map: Record<string, { x: number, y: number, width: number, height: number }> = {}
  frontSegments.forEach(seg => {
    map[seg.id] = {
      x: getRectX(seg.style.left),
      y: getRectY(seg.style.top),
      width: getRectWidth(seg.style.width),
      height: getRectHeight(seg.style.height)
    }
  })
  return map
}

function getBackSegmentMap() {
  const map: Record<string, { x: number, y: number, width: number, height: number }> = {}
  backSegments.forEach(seg => {
    map[seg.id] = {
      x: getRectX(seg.style.left),
      y: getRectY(seg.style.top),
      width: getRectWidth(seg.style.width),
      height: getRectHeight(seg.style.height)
    }
  })
  return map
}

// Применение активных стилей к path элементам
function applyActiveStyles() {
  // Обрабатываем оба SVG
  const frontSvg = frontSvgRef.value?.querySelector('svg')
  const backSvg = backSvgRef.value?.querySelector('svg')
  
  if (frontSvg) {
    applyActiveStylesToSvg(frontSvg as unknown as SVGSVGElement, frontSegments)
  }
  
  if (backSvg) {
    applyActiveStylesToSvg(backSvg as unknown as SVGSVGElement, backSegments)
  }
}

function applyActiveStylesToSvg(svg: SVGSVGElement, segments: OverlaySeg[]) {
  if (!svg) return
  // Проставляем data-атрибуты для известных фрагментов
  annotateSvgElements(svg as unknown as SVGSVGElement)
  
  // Получаем координаты активных сегментов
  const activeCoords = segments
    .filter(seg => activeIds.value.has(seg.id))
    .map(seg => ({
      id: seg.id,
      x: getRectX(seg.style.left),
      y: getRectY(seg.style.top),
      width: getRectWidth(seg.style.width),
      height: getRectHeight(seg.style.height)
    }))
  
  // Применяем стили к формам с заливкой (исключаем контуры без fill)
  const shapeSelector = 'path, polygon, rect, circle, ellipse'
  svg.querySelectorAll(shapeSelector).forEach(node => {
    const el = node as SVGGraphicsElement
    const bbox = el.getBBox()

    // Если элемент явно привязан к сегменту — используем это
    const explicitSeg = (el as unknown as HTMLElement).dataset?.segment
    const isExplicitActive = explicitSeg ? activeIds.value.has(explicitSeg) : false
    const isBboxMatch = activeCoords.some(coord => {
      return bbox.x >= coord.x - 5 && bbox.x + bbox.width <= coord.x + coord.width + 5 &&
             bbox.y >= coord.y - 5 && bbox.y + bbox.height <= coord.y + coord.height + 5
    })
    const isInActiveSegment = explicitSeg ? isExplicitActive : isBboxMatch

    const computedFill = getComputedStyle(el).fill
    const computedStroke = getComputedStyle(el).stroke
    // Проверяем атрибут fill напрямую
    const fillAttr = el.getAttribute('fill')
    const hasFill = computedFill && computedFill !== 'none' && computedFill !== 'rgba(0, 0, 0, 0)'
    // Игнорируем контуры с заливкой, если нет явной привязки
    const isStrokeOnly = computedFill === 'none' && computedStroke && computedStroke !== 'none'
    // Также игнорируем элементы с белой заливкой (контур внутренностей), если нет явной привязки
    const isWhiteFillOnly = computedFill === 'rgb(255, 255, 255)' || computedFill === '#ffffff'
    // Игнорируем элементы с зелёной заливкой (пунктирные контуры) - проверяем и атрибут, и computed
    const isGreenFillAttr = fillAttr === 'oklch(44.6% 0.043 257.281)' || fillAttr === '#4CA35E' || fillAttr === 'rgb(76, 163, 94)' || fillAttr === 'oklch(78.5% 0.115 274.713)'
    const isGreenFillComputed = computedFill === 'rgb(76, 163, 94)' || computedFill === '#4CA35E' || computedFill === 'oklch(78.5% 0.115 274.713)' || computedFill === 'oklch(44.6% 0.043 257.281)'
    const isGreenFillOnly = isGreenFillAttr || isGreenFillComputed
    
    // Применяем подсветку только если:
    // 1. Элемент явно привязан к сегменту (через data-segment)
    // 2. Или элемент попал в активный регион и у него есть заливка (не только контур), но НЕ пунктирная линия
    const shouldHighlight = (explicitSeg && isInActiveSegment) || 
                           (!explicitSeg && !isStrokeOnly && !isWhiteFillOnly && !isGreenFillOnly && isInActiveSegment && hasFill)
    
    // Ранний выход для пунктирных линий
    if (isGreenFillOnly && !explicitSeg) {
      // Не подсвечиваем пунктирные линии
      el.style.fill = ''
      el.style.stroke = ''
      el.style.strokeWidth = ''
      el.style.opacity = ''
      return
    }

    if (shouldHighlight) {
      el.style.fill = '#ef4444'
      el.style.stroke = '#dc2626'
      el.style.strokeWidth = '1.5'
      el.style.opacity = '0.85'
    } else {
      el.style.fill = ''
      el.style.stroke = ''
      el.style.strokeWidth = ''
      el.style.opacity = ''
    }
  })
}

// Обработчик клика для SVG спереди
function handleFrontSvgClick(event: MouseEvent) {
  const svgElement = (event.currentTarget as HTMLElement).querySelector('svg')
  if (!svgElement) return
  
  const rect = svgElement.getBoundingClientRect()
  const x = ((event.clientX - rect.left) / rect.width) * 164
  const y = ((event.clientY - rect.top) / rect.height) * 412
  
  // Сначала пытаемся найти элемент с data-segment по координатам клика
  const clickedElement = document.elementFromPoint(event.clientX, event.clientY) as SVGElement | null
  if (clickedElement) {
    const segmentFromData = clickedElement.getAttribute('data-segment') ||
                           clickedElement.closest('[data-segment]')?.getAttribute('data-segment')
    if (segmentFromData) {
      toggleSegment(segmentFromData)
      return
    }
  }
  
  // Иначе используем координаты
  const segmentId = getSegmentAt(x, y, frontSegments)
  if (segmentId) {
    toggleSegment(segmentId)
  }
}

// Обработчик клика для SVG сзади
function handleBackSvgClick(event: MouseEvent) {
  const svgElement = (event.currentTarget as HTMLElement).querySelector('svg')
  if (!svgElement) return
  
  const rect = svgElement.getBoundingClientRect()
  const x = ((event.clientX - rect.left) / rect.width) * 164
  const y = ((event.clientY - rect.top) / rect.height) * 412
  
  // Сначала пытаемся найти элемент с data-segment по координатам клика
  const clickedElement = document.elementFromPoint(event.clientX, event.clientY) as SVGElement | null
  if (clickedElement) {
    const segmentFromData = clickedElement.getAttribute('data-segment') ||
                           clickedElement.closest('[data-segment]')?.getAttribute('data-segment')
    if (segmentFromData) {
      toggleSegment(segmentFromData)
      return
    }
  }
  
  // Иначе используем координаты
  const segmentId = getSegmentAt(x, y, backSegments)
  if (segmentId) {
    toggleSegment(segmentId)
  }
}

// Мапы сегментов по координатам
function getSegmentAt(x: number, y: number, segments: OverlaySeg[]) {
  for (const seg of segments) {
    const left = getRectX(seg.style.left)
    const top = getRectY(seg.style.top)
    const width = getRectWidth(seg.style.width)
    const height = getRectHeight(seg.style.height)
    
    if (x >= left && x <= left + width && y >= top && y <= top + height) {
      return seg.id
    }
  }
  return null
}

// Процент по сегменту с учётом возраста
function partPercent(id: string) {
  const seg = segmentMap[id]
  if (!seg) return 0
  
  // Для front-chest суммируем грудь и живот
  if (id === 'front-chest') {
    const chestPct = lundBrowder.chest[nearestAge(ageYears.value)] || 0
    const abdomenPct = lundBrowder.abdomen[nearestAge(ageYears.value)] || 0
    return (chestPct + abdomenPct) * seg.fraction
  }
  
  const basePct = lundBrowder[seg.base][nearestAge(ageYears.value)] || 0
  
  // Для парных частей (плечи, предплечья, кисти, бедра, голени, стопы)
  // каждая половина (лев/прав) или сторона (перед/зад) = четверть от значения таблицы
  const pairedParts = ['shoulders', 'forearms', 'hands', 'thighs', 'legs', 'feet']
  if (pairedParts.includes(seg.base)) {
    // Не округляем при делении, округление будет на итоговой сумме
    return basePct / 4
  }
  
  return basePct * seg.fraction
}

function nearestAge(a: number | null | undefined) {
  if (a === null || a === undefined) return 1 // Значение по умолчанию
  if (a <= 0) return 0
  if (a <= 1) return 1
  if (a <= 5) return 5
  if (a <= 10) return 10
  return 15
}

// Итоговый процент
const totalPercent = computed(() => Array.from(activeIds.value).reduce((sum, id) => sum + partPercent(id), 0))
const totalClass = computed(() => totalPercent.value >= 20 ? 'text-red-600 dark:text-red-400' : totalPercent.value >= 10 ? 'text-amber-500 dark:text-amber-400' : 'text-emerald-600 dark:text-emerald-400')

function labelFor(id: string) { return segmentMap[id]?.label || id }
function resetAll() { 
  activeIds.value = new Set()
  ageYears.value = null
  localStorage.removeItem('burnAreaCalculator')
  applyActiveStyles()
}

// SVG контент из файлов
const svgFront = frontSvg
const svgBack = backSvg

// Функции для конвертации процентных координат в пиксели SVG (viewBox: 0 0 164 412)
function getRectX(percent: string) {
  return (parseFloat(percent) / 100 * 164)
}
function getRectY(percent: string) {
  return (parseFloat(percent) / 100 * 412)
}
function getRectWidth(percent: string) {
  return (parseFloat(percent) / 100 * 164)
}
function getRectHeight(percent: string) {
  return (parseFloat(percent) / 100 * 412)
}

// Позиционирование сегментов на SVG (размеры SVG: 164x412px)
// Используем процентные значения для адаптивности
type OverlaySeg = { id: string; style: Record<string, string> }
const frontSegments: OverlaySeg[] = [
  { id: 'front-head', style: { left: '15%', top: '3%', width: '40%', height: '17%' } },
  { id: 'front-neck', style: { left: '34%', top: '20%', width: '27%', height: '4.5%' } },
  { id: 'front-chest', style: { left: '20%', top: '24%', width: '55%', height: '15%' } },
  { id: 'front-abdomen', style: { left: '20%', top: '39%', width: '55%', height: '15%' } },
  { id: 'front-shoulder-l', style: { left: '10%', top: '24%', width: '12%', height: '18%' } },
  { id: 'front-shoulder-r', style: { left: '75%', top: '24%', width: '12%', height: '18%' } },
  { id: 'front-forearm-l', style: { left: '8%', top: '42%', width: '10%', height: '28%' } },
  { id: 'front-forearm-r', style: { left: '79%', top: '42%', width: '10%', height: '28%' } },
  { id: 'front-hand-l', style: { left: '5%', top: '70%', width: '12%', height: '6%' } },
  { id: 'front-hand-r', style: { left: '80%', top: '70%', width: '12%', height: '6%' } },
  { id: 'front-thigh-l', style: { left: '23%', top: '55%', width: '18%', height: '19%' } },
  { id: 'front-thigh-r', style: { left: '52%', top: '55%', width: '18%', height: '19%' } },
  { id: 'front-leg-l', style: { left: '23%', top: '74%', width: '18%', height: '17%' } },
  { id: 'front-leg-r', style: { left: '52%', top: '74%', width: '18%', height: '17%' } },
  { id: 'front-feet-l', style: { left: '20%', top: '96%', width: '25%', height: '3%' } },
  { id: 'front-feet-r', style: { left: '55%', top: '96%', width: '25%', height: '3%' } }
]

const backSegments: OverlaySeg[] = [
  { id: 'back-head', style: { left: '15%', top: '3%', width: '40%', height: '17%' } },
  { id: 'back-neck', style: { left: '34%', top: '20%', width: '27%', height: '4.5%' } },
  { id: 'back-back', style: { left: '20%', top: '25%', width: '55%', height: '19%' } },
  { id: 'back-buttock-l', style: { left: '20%', top: '45%', width: '22%', height: '8%' } },
  { id: 'back-buttock-r', style: { left: '43%', top: '45%', width: '22%', height: '8%' } },
  { id: 'back-genitals', style: { left: '48%', top: '54%', width: '4%', height: '2.5%' } },
  { id: 'back-shoulder-l', style: { left: '10%', top: '25%', width: '12%', height: '18%' } },
  { id: 'back-shoulder-r', style: { left: '75%', top: '25%', width: '12%', height: '18%' } },
  { id: 'back-forearm-l', style: { left: '8%', top: '44%', width: '10%', height: '28%' } },
  { id: 'back-forearm-r', style: { left: '79%', top: '44%', width: '10%', height: '28%' } },
  { id: 'back-hand-l', style: { left: '5%', top: '72%', width: '12%', height: '6%' } },
  { id: 'back-hand-r', style: { left: '80%', top: '72%', width: '12%', height: '6%' } },
  { id: 'back-thigh-l', style: { left: '23%', top: '56%', width: '18%', height: '19%' } },
  { id: 'back-thigh-r', style: { left: '52%', top: '56%', width: '18%', height: '19%' } },
  { id: 'back-leg-l', style: { left: '23%', top: '75%', width: '18%', height: '17%' } },
  { id: 'back-leg-r', style: { left: '52%', top: '75%', width: '18%', height: '17%' } },
  { id: 'back-feet-l', style: { left: '20%', top: '97%', width: '25%', height: '3%' } },
  { id: 'back-feet-r', style: { left: '55%', top: '97%', width: '25%', height: '3%' } }
]

// Таблица для отображения
const tableRows = computed(() => [
  { part: 'Голова', a0: 20, a1: 17, a5: 13, a10: 10, a15: 8 },
  { part: 'Шея', a0: 2, a1: 2, a5: 2, a10: 2, a15: 2 },
  { part: 'Грудь', a0: 10, a1: 10, a5: 10, a10: 10, a15: 10 },
  { part: 'Живот', a0: 8, a1: 8, a5: 8, a10: 8, a15: 8 },
  { part: 'Спина', a0: 11, a1: 11, a5: 11, a10: 11, a15: 11 },
  { part: 'Ягодицы (2)', a0: 5, a1: 5, a5: 5, a10: 5, a15: 5 },
  { part: 'Гениталии', a0: 1, a1: 1, a5: 1, a10: 1, a15: 1 },
  { part: 'Плечи (2)', a0: 8, a1: 8, a5: 8, a10: 8, a15: 8 },
  { part: 'Предплечья (2)', a0: 5, a1: 5, a5: 5, a10: 5, a15: 5 },
  { part: 'Кисти', a0: 5, a1: 5, a5: 5, a10: 5, a15: 5 },
  { part: 'Бедра (2)', a0: 11, a1: 13, a5: 16, a10: 18, a15: 19 },
  { part: 'Голени (2)', a0: 9, a1: 10, a5: 11, a10: 12, a15: 13 },
  { part: 'Стопы (2)', a0: 5, a1: 5, a5: 5, a10: 5, a15: 5 }
])

// Инициализация при монтировании — загружаем данные из localStorage и проставляем data-segment
onMounted(async () => {
  loadFromLocalStorage()
  await nextTick()
  applyActiveStyles()
})

// Watch для сохранения при изменении возраста
watch(ageYears, () => {
  saveToLocalStorage()
})
</script>

<style scoped>
.interactive-svg {
  height: 100%;
  width: auto;
}

.interactive-svg :deep(svg) {
  width: 100%;
  height: 100%;
  aspect-ratio: 164 / 412;
  object-fit: contain;
}

/* Скрываем стрелки для input type="number" */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}
</style>
                  