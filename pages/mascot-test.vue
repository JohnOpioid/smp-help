<template>
  <div class="min-h-screen bg-slate-50 dark:bg-slate-900 py-8">
    <div class="max-w-4xl mx-auto px-4">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-slate-900 dark:text-white mb-4">
          –¢–µ—Å—Ç –º–∞—Å–∫–æ—Ç–∞
        </h1>
        <p class="text-slate-600 dark:text-slate-400">
          –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Å–∫–æ—Ç-–º–µ–¥—Å–µ—Å—Ç—Ä–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –∫—É—Ä—Å–æ—Ä–∞ –∏ —Ä–µ–ø–ª–∏–∫–∞–º–∏
        </p>
      </div>

      <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
      <UCard class="mb-8">
        <template #header>
          <h2 class="text-xl font-semibold">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å–∫–æ—Ç–æ–º</h2>
        </template>
        
        <div class="space-y-4">
          <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
          <div class="flex flex-wrap gap-3">
            <UButton 
              @click="triggerRandomPhrase"
              color="primary"
              variant="solid"
            >
              –°–ª—É—á–∞–π–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞
            </UButton>
            
            <UButton 
              @click="triggerWelcome"
              color="success"
              variant="solid"
            >
              –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
            </UButton>
            
            <UButton 
              @click="triggerHelp"
              color="primary"
              variant="solid"
            >
              –ü–æ–º–æ—â—å
            </UButton>
            
            <UButton 
              @click="triggerEncouragement"
              color="secondary"
              variant="solid"
            >
              –ü–æ–¥–¥–µ—Ä–∂–∫–∞
            </UButton>
          </div>

          <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
            <div class="bg-slate-100 dark:bg-slate-800 rounded-lg p-4">
              <h3 class="font-medium text-slate-900 dark:text-white mb-2">
                –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-400">
                –ú–∞—Å–∫–æ—Ç —Å–ª–µ–¥–∏—Ç –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ–º –º—ã—à–∏ –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É –∫—É—Ä—Å–æ—Ä–∞
              </p>
            </div>
            
            <div class="bg-slate-100 dark:bg-slate-800 rounded-lg p-4">
              <h3 class="font-medium text-slate-900 dark:text-white mb-2">
                –ê–Ω–∏–º–∞—Ü–∏—è —É–ª—ã–±–∫–∏
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-400">
                –ü—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–≤–µ—Ç—è—â–∏–µ—Å—è –∏—Å–∫–æ—Ä–∫–∏ –≤–æ–∫—Ä—É–≥ –º–∞—Å–∫–æ—Ç–∞
              </p>
            </div>
            
            <div class="bg-slate-100 dark:bg-slate-800 rounded-lg p-4">
              <h3 class="font-medium text-slate-900 dark:text-white mb-2">
                –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–µ–ø–ª–∏–∫–∏
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-400">
                –ú–∞—Å–∫–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–æ–≤–æ—Ä–∏—Ç –∫–∞–∂–¥—ã–µ 15-45 —Å–µ–∫—É–Ω–¥
              </p>
            </div>
          </div>
        </div>
      </UCard>

      <!-- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
      <UCard>
        <template #header>
          <h2 class="text-xl font-semibold">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</h2>
        </template>
        
        <div class="space-y-6">
          <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4">
            <h3 class="font-medium text-blue-900 dark:text-blue-300 mb-2">
              –ö–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –º–∞—Å–∫–æ—Ç–æ–º:
            </h3>
            <ul class="text-sm text-blue-800 dark:text-blue-400 space-y-1">
              <li>‚Ä¢ –î–≤–∏–≥–∞–π—Ç–µ –º—ã—à—å—é –ø–æ —ç–∫—Ä–∞–Ω—É - –º–∞—Å–∫–æ—Ç –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º</li>
              <li>‚Ä¢ –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –º–∞—Å–∫–æ—Ç–∞ - –æ–Ω –ø–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—Å</li>
              <li>‚Ä¢ –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –º–∞—Å–∫–æ—Ç—É - –æ–Ω —Å–∫–∞–∂–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Ñ—Ä–∞–∑—É</li>
              <li v-if="mascotType === 'advanced'">‚Ä¢ –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –º–∞—Å–∫–æ—Ç—É - –æ—Ç–∫—Ä–æ–µ—Ç –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π</li>
              <li v-if="mascotType === 'advanced'">‚Ä¢ –ú–∞—Å–∫–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ—Ä–≥–∞–µ—Ç</li>
              <li v-if="mascotType === 'advanced'">‚Ä¢ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –º–∞—Å–∫–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç</li>
              <li v-if="mascotType === 'animated'">‚Ä¢ –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–∞–∑–∞ —Å–ª–µ–¥—è—Ç –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º</li>
              <li v-if="mascotType === 'animated'">‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–æ—Ä–≥–∞–Ω–∏–µ –∏ –¥—ã—Ö–∞–Ω–∏–µ</li>
              <li v-if="mascotType === 'lottie'">‚Ä¢ Lottie –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π</li>
              <li v-if="mascotType === 'lottie'">‚Ä¢ –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏</li>
              <li>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ–ø–ª–∏–∫</li>
              <li>‚Ä¢ –ú–∞—Å–∫–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–æ–≤–æ—Ä–∏—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏</li>
            </ul>
          </div>

          <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ -->
          <div 
            class="relative h-96 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center"
          >
            <div class="text-center text-slate-500 dark:text-slate-400">
              <p class="text-lg font-medium mb-2">–î–≤–∏–≥–∞–π—Ç–µ –º—ã—à—å—é –∑–¥–µ—Å—å</p>
              <p class="text-sm">–ú–∞—Å–∫–æ—Ç –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º</p>
            </div>
          </div>

          <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-slate-100 dark:bg-slate-800 rounded-lg p-4">
              <h3 class="font-medium text-slate-900 dark:text-white mb-2">
                –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
              </h3>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                  <span class="text-slate-600 dark:text-slate-400">–ö–ª–∏–∫–∏ –ø–æ –º–∞—Å–∫–æ—Ç—É:</span>
                  <span class="font-medium">{{ stats.clicks }}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-600 dark:text-slate-400">–ù–∞–≤–µ–¥–µ–Ω–∏—è:</span>
                  <span class="font-medium">{{ stats.hovers }}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-600 dark:text-slate-400">–†–µ–ø–ª–∏–∫ –ø–æ–∫–∞–∑–∞–Ω–æ:</span>
                  <span class="font-medium">{{ stats.phrases }}</span>
                </div>
              </div>
            </div>
            
            <div class="bg-slate-100 dark:bg-slate-800 rounded-lg p-4">
              <h3 class="font-medium text-slate-900 dark:text-white mb-2">
                –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
              </h3>
              <div class="text-sm text-slate-600 dark:text-slate-400">
                <p v-if="lastActivity">
                  {{ lastActivity }}
                </p>
                <p v-else>
                  –ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                </p>
              </div>
            </div>
          </div>
        </div>
      </UCard>

      <!-- –í—ã–±–æ—Ä —Ç–∏–ø–∞ –º–∞—Å–∫–æ—Ç–∞ -->
      <UCard class="mb-8">
        <template #header>
          <h2 class="text-xl font-semibold">–¢–∏–ø –º–∞—Å–∫–æ—Ç–∞</h2>
        </template>
        
        <div class="flex flex-wrap gap-3">
          <UButton 
            @click="mascotType = 'basic'"
            :variant="mascotType === 'basic' ? 'solid' : 'outline'"
            color="primary"
          >
            –ë–∞–∑–æ–≤—ã–π
          </UButton>
          <UButton 
            @click="mascotType = 'advanced'"
            :variant="mascotType === 'advanced' ? 'solid' : 'outline'"
            color="success"
          >
            –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
          </UButton>
          <UButton 
            @click="mascotType = 'animated'"
            :variant="mascotType === 'animated' ? 'solid' : 'outline'"
            color="secondary"
          >
            –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
          </UButton>
          <UButton 
            @click="mascotType = 'lottie'"
            :variant="mascotType === 'lottie' ? 'solid' : 'outline'"
              color="warning"
          >
            Lottie
          </UButton>
        </div>
      </UCard>

      <!-- –ú–∞—Å–∫–æ—Ç -->
      <Mascot 
        v-if="mascotType === 'basic'"
        ref="mascotRef"
        @click="handleMascotClick"
        @hover="handleMascotHover"
      />
      
      <MascotAdvanced 
        v-if="mascotType === 'advanced'"
        ref="mascotAdvancedRef"
        @click="handleMascotClick"
        @hover="handleMascotHover"
      />
      
      <MascotAnimated 
        v-if="mascotType === 'animated'"
        ref="mascotAnimatedRef"
        @click="handleMascotClick"
        @hover="handleMascotHover"
      />
      
      <MascotLottie 
        v-if="mascotType === 'lottie'"
        ref="mascotLottieRef"
        @click="handleMascotClick"
        @hover="handleMascotHover"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
// –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
definePageMeta({
  title: '–¢–µ—Å—Ç –º–∞—Å–∫–æ—Ç–∞',
  description: '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Å–∫–æ—Ç–∞-–º–µ–¥—Å–µ—Å—Ç—Ä—ã',
  middleware: 'auth'
})

// –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
const mascotRef = ref()
const mascotAdvancedRef = ref()
const mascotAnimatedRef = ref()
const mascotLottieRef = ref()
const mascotType = ref<'basic' | 'advanced' | 'animated' | 'lottie'>('basic')
const stats = ref({
  clicks: 0,
  hovers: 0,
  phrases: 0
})
const lastActivity = ref('')

// –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Å–∫–æ—Ç–æ–º
const getCurrentMascot = () => {
  switch (mascotType.value) {
    case 'basic':
      return mascotRef.value
    case 'advanced':
      return mascotAdvancedRef.value
    case 'animated':
      return mascotAnimatedRef.value
    case 'lottie':
      return mascotLottieRef.value
    default:
      return mascotRef.value
  }
}

const triggerRandomPhrase = () => {
  const mascot = getCurrentMascot()
  if (mascot) {
    mascot.speakRandomPhrase()
    stats.value.phrases++
    lastActivity.value = `–°–ª—É—á–∞–π–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞ –≤ ${new Date().toLocaleTimeString()}`
  }
}

const triggerWelcome = () => {
  const mascot: any = getCurrentMascot()
  if (mascot) {
    mascot.speakPhrase('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –Ø —Ä–∞–¥–∞ –≤–∞—Å –≤–∏–¥–µ—Ç—å! üòä')
    stats.value.phrases++
    lastActivity.value = `–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ ${new Date().toLocaleTimeString()}`
  }
}

const triggerHelp = () => {
  const mascot: any = getCurrentMascot()
  if (mascot) {
    mascot.speakPhrase('–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å? –Ø –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã! üíô')
    stats.value.phrases++
    lastActivity.value = `–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–º–æ—â–∏ –≤ ${new Date().toLocaleTimeString()}`
  }
}

const triggerEncouragement = () => {
  const mascot: any = getCurrentMascot()
  if (mascot) {
    mascot.speakPhrase('–í—ã –¥–µ–ª–∞–µ—Ç–µ –æ—Ç–ª–∏—á–Ω—É—é —Ä–∞–±–æ—Ç—É! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! ‚ú®')
    stats.value.phrases++
    lastActivity.value = `–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ ${new Date().toLocaleTimeString()}`
  }
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–∞—Å–∫–æ—Ç–∞
const handleMascotClick = () => {
  stats.value.clicks++
  lastActivity.value = `–ö–ª–∏–∫ –ø–æ –º–∞—Å–∫–æ—Ç—É –≤ ${new Date().toLocaleTimeString()}`
}

const handleMascotHover = () => {
  stats.value.hovers++
  lastActivity.value = `–ù–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –º–∞—Å–∫–æ—Ç–∞ –≤ ${new Date().toLocaleTimeString()}`
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
onMounted(() => {
  // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  setTimeout(() => {
    triggerWelcome()
  }, 1000)
})
</script>

<style scoped>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
.animate-pulse-slow {
  animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out;
}
</style>
