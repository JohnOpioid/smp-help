# –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: Capacitor + MongoDB –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è SMP-Help

## üéØ –í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–£ –≤–∞—Å –µ—Å—Ç—å **–¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

### –í–∞—Ä–∏–∞–Ω—Ç A: MongoDB Atlas (–æ–±–ª–∞—á–Ω—ã–π) - –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ

### –í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–∞—è MongoDB - –µ—Å–ª–∏ Atlas –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞
- ‚ùå –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- ‚ùå –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

### –í–∞—Ä–∏–∞–Ω—Ç A: MongoDB Atlas

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Atlas (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ** [https://cloud.mongodb.com/](https://cloud.mongodb.com/)
2. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç** –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä M0
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ App Services** ‚Üí **Create New App**
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**:
   - –í–∫–ª—é—á–∏—Ç–µ **Anonymous**
   - –í–∫–ª—é—á–∏—Ç–µ **Custom JWT** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Rules** –¥–ª—è –≤–∞—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π:

**–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ):**
```javascript
{
  "rules": [
    {
      "name": "read_reference_data",
      "applyWhen": {},
      "read": true,
      "write": false
    }
  ]
}
```

**–û—Ç–∑—ã–≤—ã (—á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å):**
```javascript
{
  "rules": [
    {
      "name": "feedback_rules",
      "applyWhen": {},
      "read": true,
      "write": true
    }
  ]
}
```

6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ App ID** –∏–∑ **App Settings** ‚Üí **General**

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Atlas

**–°–æ–∑–¥–∞–π—Ç–µ `.env`:**
```env
# MongoDB Atlas
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/smp-help

# MongoDB Realm App ID
REALM_APP_ID=smp-help-xxxxx

# JWT Secret
JWT_SECRET=your-super-secret-jwt-key-change-this

# Yandex Maps API Key
YAMAPS_API_KEY=0cf3bb2c-e67f-4006-8a3e-c5df09b9da6c
```

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
npm install @capacitor/app @capacitor/network @capacitor/status-bar realm-web
```

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–∞—è MongoDB

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB –ª–æ–∫–∞–ª—å–Ω–æ

**–°–ø–æ—Å–æ–± 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ docker-compose.yml
cat > docker-compose.yml << EOF
version: '3.8'
services:
  mongodb:
    image: mongo:latest
    container_name: mongodb-smp
    restart: always
    ports:
      - "27017:27017"
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password
      MONGO_INITDB_DATABASE: smp-help
    volumes:
      - mongodb_data:/data/db

volumes:
  mongodb_data:
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB
docker-compose up -d
```

**–°–ø–æ—Å–æ–± 2: Chocolatey (Windows)**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Chocolatey
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB
choco install mongodb
```

**–°–ø–æ—Å–æ–± 3: –ü—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**
1. –°–∫–∞—á–∞–π—Ç–µ —Å [mongodb.com](https://www.mongodb.com/try/download/community)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MongoDB Community Server
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: `net start MongoDB`

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–°–æ–∑–¥–∞–π—Ç–µ `.env`:**
```env
# –õ–æ–∫–∞–ª—å–Ω–∞—è MongoDB
MONGODB_URI=mongodb://admin:password@localhost:27017/smp-help

# –û—Ç–∫–ª—é—á–∏—Ç–µ Realm –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
REALM_APP_ID=

# JWT Secret
JWT_SECRET=your-super-secret-jwt-key-change-this

# Yandex Maps API Key
YAMAPS_API_KEY=0cf3bb2c-e67f-4006-8a3e-c5df09b9da6c
```

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
npm install @capacitor/app @capacitor/network @capacitor/status-bar dexie
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ `nuxt.config.ts`

```typescript
export default defineNuxtConfig({
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  
  runtimeConfig: {
    mongodbUri: process.env.MONGODB_URI || 'mongodb://localhost:27017/smp-help',
    public: {
      realmAppId: process.env.REALM_APP_ID || ''
    }
  },
  
  plugins: [
    // –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
    ...(process.env.REALM_APP_ID ? ['~/plugins/realm.client.ts'] : ['~/plugins/mongodb-local.client.ts']),
    '~/plugins/capacitor.client.ts'
  ]
})
```

### 2. –û–±–Ω–æ–≤–∏—Ç–µ `capacitor.config.ts`

```typescript
import type { CapacitorConfig } from '@capacitor/cli';

const config: CapacitorConfig = {
  appId: 'ru.smp.help',
  appName: '–ü–æ–º–æ—â–Ω–∏–∫ –°–ú–ü',
  webDir: '.output/public',
  server: {
    androidScheme: 'https'
  },
  plugins: {
    StatusBar: {
      style: 'dark',
      backgroundColor: '#3b82f6'
    },
    App: {
      launchUrl: process.env.REALM_APP_ID ? 'https://localhost:3000' : 'http://localhost:3000'
    }
  }
};

export default config;
```

### 3. –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ `package.json`

```json
{
  "scripts": {
    "cap:sync": "cap sync",
    "cap:build": "npm run build && cap sync",
    "cap:android": "cap open android",
    "cap:run:android": "cap run android"
  }
}
```

---

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –î–ª—è Atlas (Realm Web SDK)

```typescript
// –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const { getCollectionSnapshot } = useRealmRead()
const drugs = await getCollectionSnapshot('drugs')

// –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö
const { upsertOne } = useRealmWrite()
await upsertOne('feedbacks', { message: '–û—Ç–∑—ã–≤', rating: 5 })

// –ü–æ–∏—Å–∫
const searchResults = await getCollectionSnapshot('drugs', {
  name: { $regex: '–ø–∞—Ä–∞—Ü–µ—Ç–∞–º–æ–ª', $options: 'i' }
})
```

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π MongoDB

```typescript
// –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const { getData } = useLocalData()
const drugs = await getData('drugs')

// –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö
const { saveData } = useLocalData()
await saveData('feedbacks', { message: '–û—Ç–∑—ã–≤', rating: 5 }, 'insert')

// –ü–æ–∏—Å–∫ –≤ –∫—ç—à–µ
const { searchInCache } = useLocalData()
const results = await searchInCache('drugs', '–ø–∞—Ä–∞—Ü–µ—Ç–∞–º–æ–ª', ['name', 'description'])
```

---

## üèóÔ∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run cap:build
```

### 2. –ó–∞–ø—É—Å–∫ –Ω–∞ Android

```bash
# –û—Ç–∫—Ä—ã—Ç–∏–µ Android Studio
npm run cap:android

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ CLI
npm run cap:run:android
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Capacitor
npx cap doctor

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB
mongosh "mongodb://admin:password@localhost:27017/smp-help"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ** (–ª–µ–∫–∞—Ä—Å—Ç–≤–∞, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –ú–ö–ë)
3. **–û—Ç–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤**
6. **–í–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç**
7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É** –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```typescript
// –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
async function testAllCollections() {
  const collections = ['drugs', 'algorithms', 'mkbs', 'regions', 'substations']
  
  for (const collection of collections) {
    try {
      const data = await getCollectionSnapshot(collection) // –∏–ª–∏ getData –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π
      console.log(`${collection}: ${data.length} –∑–∞–ø–∏—Å–µ–π`)
    } catch (error) {
      console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ${collection}:`, error)
    }
  }
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞

```typescript
// –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤
async function testDrugSearch() {
  const searchQueries = ['–ø–∞—Ä–∞—Ü–µ—Ç–∞–º–æ–ª', '–∏–±—É–ø—Ä–æ—Ñ–µ–Ω', '–∞—Å–ø–∏—Ä–∏–Ω']
  
  for (const query of searchQueries) {
    const results = await getCollectionSnapshot('drugs', {
      name: { $regex: query, $options: 'i' }
    })
    console.log(`–ü–æ–∏—Å–∫ "${query}": ${results.length} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤`)
  }
}
```

---

## üîÑ –ò–º–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 1. –ò–º–ø–æ—Ä—Ç –∏–∑ JSON —Ñ–∞–π–ª–æ–≤

```typescript
// scripts/import-data.ts
export async function importDataToMongoDB() {
  const collections = [
    'drugs', 'drugs2', 'algorithms', 'algorithmcategories', 'algorithmsections',
    'mkbs', 'mkbcategories', 'regions', 'regionphones', 'substations',
    'instructions', 'localstatuses', 'localstatuscategories',
    'shifts', 'shifttemplates', 'shiftalternations', 'categories'
  ]
  
  for (const collection of collections) {
    try {
      const data = await import(`~/mongodb/smp-help.${collection}.json`)
      
      // –î–ª—è Atlas
      if (process.env.REALM_APP_ID) {
        const { upsertOne } = useRealmWrite()
        for (const item of data.default) {
          await upsertOne(collection, item)
        }
      }
      
      // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π MongoDB
      else {
        const { saveData } = useLocalData()
        for (const item of data.default) {
          await saveData(collection, item, 'insert')
        }
      }
      
      console.log(`${collection}: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${data.default.length} –∑–∞–ø–∏—Å–µ–π`)
    } catch (error) {
      console.error(`–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ ${collection}:`, error)
    }
  }
}
```

### 2. –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞
node -e "
import('./scripts/import-data.js').then(module => {
  module.importDataToMongoDB()
})
"
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å Atlas

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| "App ID –Ω–µ –Ω–∞–π–¥–µ–Ω" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `REALM_APP_ID` –≤ `.env` |
| "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ JWT –≤ App Services |
| "–î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Rules –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ |
| "Atlas –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é MongoDB |

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–∫–∞–ª—å–Ω–æ–π MongoDB

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| "MongoDB –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 27017, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å |
| "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `MONGODB_URI` –≤ `.env` |
| "–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö |
| "–ö—ç—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç" | –û—á–∏—Å—Ç–∏—Ç–µ IndexedDB –≤ –±—Ä–∞—É–∑–µ—Ä–µ |

### –ü—Ä–æ–±–ª–µ–º—ã —Å Capacitor

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Android SDK, `adb devices` |
| "–û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏" | –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à: `npx cap clean` |
| "–ü–ª–∞–≥–∏–Ω—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç" | –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `npm run cap:sync` |

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### 1. –õ–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```typescript
// –í–∫–ª—é—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
console.log('MongoDB URI:', process.env.MONGODB_URI)
console.log('Realm App ID:', process.env.REALM_APP_ID)
console.log('Online status:', navigator.onLine)
```

### 2. –õ–æ–≥–∏ –≤ Android Studio

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Logcat**
2. –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ `Capacitor` –∏–ª–∏ `smp-help`
3. –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞

```typescript
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
const { getCacheStats } = useLocalData()
const stats = await getCacheStats()
console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞:', stats)
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏

```typescript
// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏
const { isOnline, pendingMutations } = useSyncStatus()
console.log('Online:', isOnline.value)
console.log('Pending mutations:', pendingMutations.value)
```

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```env
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã
JWT_SECRET=your-super-secure-jwt-secret-min-32-chars

# –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ MongoDB
MONGODB_URI=mongodb://username:strong-password@localhost:27017/smp-help
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```typescript
// –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –≤ MongoDB
db.drugs.createIndex({ name: 1 })
db.algorithms.createIndex({ title: 1 })
db.mkbs.createIndex({ code: 1 })

// –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
const CACHE_LIMIT = 1000 // –∑–∞–ø–∏—Å–µ–π –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é
```

### 3. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
mongodump --uri="mongodb://admin:password@localhost:27017/smp-help" --out=./backup

# –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
mongorestore --uri="mongodb://admin:password@localhost:27017/smp-help" ./backup
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

### –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π MongoDB –≤ Atlas

1. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ**:
```bash
mongodump --uri="mongodb://admin:password@localhost:27017/smp-help" --out=./backup
```

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ Atlas**:
```bash
mongorestore --uri="mongodb+srv://username:password@cluster.mongodb.net/smp-help" ./backup
```

3. **–û–±–Ω–æ–≤–∏—Ç–µ `.env`**:
```env
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/smp-help
REALM_APP_ID=smp-help-xxxxx
```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

### –ò–∑ Atlas –≤ –ª–æ–∫–∞–ª—å–Ω—É—é MongoDB

1. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏–∑ Atlas**:
```bash
mongodump --uri="mongodb+srv://username:password@cluster.mongodb.net/smp-help" --out=./backup
```

2. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ**:
```bash
mongorestore --uri="mongodb://admin:password@localhost:27017/smp-help" ./backup
```

3. **–û–±–Ω–æ–≤–∏—Ç–µ `.env`**:
```env
MONGODB_URI=mongodb://admin:password@localhost:27017/smp-help
REALM_APP_ID=
```

---

## üì± –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```bash
npm install @capacitor/push-notifications
```

### –ö–∞–º–µ—Ä–∞
```bash
npm install @capacitor/camera
```

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
```bash
npm install @capacitor/geolocation
```

### –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
```bash
npm install @capacitor/filesystem
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:
- [ ] –í—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Atlas –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ MongoDB (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Atlas)
- [ ] –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω `nuxt.config.ts` –∏ `capacitor.config.ts`
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å–±–æ—Ä–∫–∞: `npm run cap:build`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—É—Å–∫ –Ω–∞ Android: `npm run cap:run:android`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –≤ MongoDB
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Capacitor –ø–ª–∞–≥–∏–Ω—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å **–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å:

‚úÖ **–û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞  
‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏  
‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º  
‚úÖ **–ü–æ–∏—Å–∫** - –ø–æ –≤—Å–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π  
‚úÖ **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —á–µ—Ä–µ–∑ Capacitor  

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏! üöÄ

