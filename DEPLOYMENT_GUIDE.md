# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –°–ú–ü –Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –°–ú–ü** - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Nuxt.js 3 —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç—å—é –Ω–∞ Node.js, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ MongoDB –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç:

- **Frontend**: Nuxt.js 3, Vue 3, TypeScript, Tailwind CSS
- **Backend**: Nuxt Server API, MongoDB
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT —Ç–æ–∫–µ–Ω—ã
- **AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: GigaChat API, NuxtHub AI
- **–ö–∞—Ä—Ç—ã**: Yandex Maps API

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Ubuntu

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
sudo apt update && sudo apt upgrade -y
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js (–≤–µ—Ä—Å–∏—è 18+)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js —á–µ—Ä–µ–∑ NodeSource
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
node --version
npm --version
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB
```bash
# –ò–º–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ MongoDB
wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è MongoDB
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB
sudo apt-get update
sudo apt-get install -y mongodb-org

# –ó–∞–ø—É—Å–∫ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ MongoDB
sudo systemctl start mongod
sudo systemctl enable mongod

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status mongod
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 (Process Manager)
```bash
sudo npm install -g pm2
```

### 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
```bash
sudo apt install nginx -y
sudo systemctl start nginx
sudo systemctl enable nginx
```

### 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
```bash
sudo apt install git -y
```

## üìÅ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
git clone https://github.com/your-username/smp-help.git
cd smp-help
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø—Ä–∏–º–µ—Ä–∞
cp env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `.env` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```env
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/smp-help

# JWT Secret (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–ª–æ–∂–Ω—ã–π –∫–ª—é—á!)
JWT_SECRET=your-super-secure-jwt-secret-key-for-production-2024

# Yandex Maps API Key
YAMAPS_API_KEY=your-yandex-maps-api-key

# GigaChat AI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
GIGACHAT_API_KEY=your-gigachat-api-key
GIGACHAT_CLIENT_ID=your-gigachat-client-id
GIGACHAT_SCOPE=GIGACHAT_API_PERS

# NuxtHub (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
NUXT_HUB_PROJECT_SECRET_KEY=your-hub-secret-key
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CLOUDFLARE_ACCOUNT_ID=your-cloudflare-account-id

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
NODE_ENV=production
PORT=3000
```

## üîß –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
nano ecosystem.config.js
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `ecosystem.config.js`:**
```javascript
module.exports = {
  apps: [{
    name: 'smp-help',
    script: '.output/server/index.mjs',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_file: './logs/combined.log',
    time: true,
    max_memory_restart: '1G',
    node_args: '--max-old-space-size=1024'
  }]
}
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
```bash
mkdir logs
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ PM2
```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
pm2 save

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ PM2
pm2 startup
```

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∞–π—Ç–∞
```bash
sudo nano /etc/nginx/sites-available/smp-help
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx:**
```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω

    # –õ–æ–≥–∏
    access_log /var/log/nginx/smp-help.access.log;
    error_log /var/log/nginx/smp-help.error.log;

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    client_max_body_size 10M;

    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 300s;
        proxy_connect_timeout 75s;
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    location /_nuxt/ {
        proxy_pass http://localhost:3000;
        proxy_cache_valid 200 1d;
        expires 1d;
        add_header Cache-Control "public, immutable";
    }

    # API endpoints
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∞–π—Ç–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
sudo ln -s /etc/nginx/sites-available/smp-help /etc/nginx/sites-enabled/

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
sudo systemctl reload nginx
```

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
```bash
sudo apt install certbot python3-certbot-nginx -y
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```bash
sudo certbot --nginx -d your-domain.com -d www.your-domain.com
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
sudo crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```bash
0 12 * * * /usr/bin/certbot renew --quiet
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
mongosh

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
use admin
db.createUser({
  user: "admin",
  pwd: "help-smp",
  roles: ["userAdminAnyDatabase", "dbAdminAnyDatabase", "readWriteAnyDatabase"]
})

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
use smp-help
db.createUser({
  user: "help-smp-user",
  pwd: "help-smp",
  roles: ["readWrite"]
})

exit
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ MongoDB
```bash
sudo nano /etc/mongod.conf
```

–î–æ–±–∞–≤—å—Ç–µ/–∏–∑–º–µ–Ω–∏—Ç–µ:
```yaml
security:
  authorization: enabled
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ MongoDB
```bash
sudo systemctl restart mongod
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ .env
```env
MONGODB_URI=mongodb://smp-help-user:your-app-password@localhost:27017/smp-help
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ PM2
```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs smp-help

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 monit
```

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx
```bash
# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
sudo tail -f /var/log/nginx/smp-help.access.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
sudo tail -f /var/log/nginx/smp-help.error.log
```

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ MongoDB
```bash
sudo tail -f /var/log/mongodb/mongod.log
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
nano update.sh
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `update.sh`:**
```bash
#!/bin/bash

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –°–ú–ü..."

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd ~/smp-help

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git pull origin main

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart smp-help

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
```

### 2. –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
```bash
chmod +x update.sh
```

### 3. –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
./update.sh
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW
sudo ufw enable

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ SSH
sudo ufw allow ssh

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTP –∏ HTTPS
sudo ufw allow 80
sudo ufw allow 443

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo ufw status
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ fail2ban
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ fail2ban
sudo apt install fail2ban -y

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nano /etc/fail2ban/jail.local
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `jail.local`:**
```ini
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 3

[nginx-http-auth]
enabled = true
port = http,https
logpath = /var/log/nginx/smp-help.error.log

[nginx-limit-req]
enabled = true
port = http,https
logpath = /var/log/nginx/smp-help.access.log
maxretry = 10
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ fail2ban
```bash
sudo systemctl restart fail2ban
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB
```bash
sudo nano /etc/mongod.conf
```

–î–æ–±–∞–≤—å—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```yaml
storage:
  wiredTiger:
    engineConfig:
      cacheSizeGB: 1  # –ü–æ–ª–æ–≤–∏–Ω–∞ –æ—Ç RAM

systemLog:
  destination: file
  logAppend: true
  path: /var/log/mongodb/mongod.log

operationProfiling:
  slowOpThresholdMs: 100
  mode: slowOp
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
sudo nano /etc/nginx/sites-available/smp-help
```

–î–æ–±–∞–≤—å—Ç–µ –≤ –±–ª–æ–∫ `server`:
```nginx
# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    proxy_pass http://localhost:3000;
}

# –°–∂–∞—Ç–∏–µ
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
```

## üö® –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
nano backup.sh
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `backup.sh`:**
```bash
#!/bin/bash

BACKUP_DIR="/home/ubuntu/backups"
DATE=$(date +%Y%m%d_%H%M%S)
DB_NAME="smp-help"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø MongoDB
mongodump --db $DB_NAME --out $BACKUP_DIR/mongodb_$DATE

# –ë—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tar -czf $BACKUP_DIR/app_$DATE.tar.gz ~/smp-help

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find $BACKUP_DIR -name "mongodb_*" -type d -mtime +7 -exec rm -rf {} \;
find $BACKUP_DIR -name "app_*.tar.gz" -mtime +7 -delete

echo "‚úÖ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: $DATE"
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤
```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ:
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00
0 2 * * * /home/ubuntu/smp-help/backup.sh
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ Ubuntu
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Node.js 18+
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω MongoDB
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PM2
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Nginx
- [ ] ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π–ª .env
- [ ] ‚úÖ –°–æ–±—Ä–∞–Ω –ø—Ä–æ–µ–∫—Ç
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω PM2
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω Nginx
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω SSL
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å MongoDB
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π—Ä–≤–æ–ª
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω fail2ban
- [ ] ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ PM2
pm2 logs smp-help

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart smp-help
```

### –ü—Ä–æ–±–ª–µ–º–∞: MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ MongoDB
sudo systemctl status mongod

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ MongoDB
sudo tail -f /var/log/mongodb/mongod.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ MongoDB
sudo systemctl restart mongod
```

### –ü—Ä–æ–±–ª–µ–º–∞: Nginx –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
sudo systemctl reload nginx
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `pm2 logs smp-help`
2. –õ–æ–≥–∏ Nginx: `sudo tail -f /var/log/nginx/smp-help.error.log`
3. –õ–æ–≥–∏ MongoDB: `sudo tail -f /var/log/mongodb/mongod.log`
4. –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `sudo systemctl status mongod nginx`

---

**–£–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üöÄ**
